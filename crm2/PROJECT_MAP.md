# PROJECT_MAP

–û–±–Ω–æ–≤–ª–µ–Ω–æ: 2025-09-25T09:52:10.291427Z

## –ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ –∫–ª—é—á–µ–≤—ã—Ö –º–æ–¥—É–ª–µ–π
- **app.py** ‚Äî —Ç–æ—á–∫–∞ –≤—Ö–æ–¥–∞: –∑–∞–≥—Ä—É–∑–∫–∞ .env, –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è `Bot/Dispatcher`, –≤–∫–ª—é—á–µ–Ω–∏–µ —Ä–æ—É—Ç–µ—Ä–æ–≤.
- **panel.py** ‚Äî —Ö–µ–Ω–¥–ª–µ—Ä—ã —Ä–∞–∑–¥–µ–ª–æ–≤ –∞–¥–º–∏–Ω-–ø–∞–Ω–µ–ª–∏ (–∫–Ω–æ–ø–∫–∏: –ü–æ—Å–µ—â–∞–µ–º–æ—Å—Ç—å, –î–æ–º–∞—à–Ω–∏–µ –∑–∞–¥–∞–Ω–∏—è, –∏ —Ç.–¥.).
- **admin_attendance.py** ‚Äî –ª–æ–≥–∏–∫–∞ –æ—Ç–º–µ—Ç–∫–∏ –ø–æ—Å–µ—â–∞–µ–º–æ—Å—Ç–∏ (`/attendance_*`).
- **admin_homework.py** ‚Äî —Ä–∞—Å—Å—ã–ª–∫–∞ –î–ó –ø–æ `session_id` —Ç–æ–ª—å–∫–æ ¬´present¬ª –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º (`/homework_*`).
- **admin_users.py** ‚Äî –ø—Ä–æ—Å–º–æ—Ç—Ä/–ø–∞–≥–∏–Ω–∞—Ü–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π.
- **admin_db.py** ‚Äî –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞ –∏ —É—Ç–∏–ª–∏—Ç—ã –ë–î (—Ç–æ–ª—å–∫–æ –∞–¥–º–∏–Ω–∞–º).
- **schedule.py** ‚Äî —É—Ç–∏–ª–∏—Ç—ã/—Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ —Ä–∞—Å–ø–∏—Å–∞–Ω–∏—è (–∫–ª–∞–≤–∏–∞—Ç—É—Ä—ã, –¥–∞—Ç—ã).
- **crm2/handlers/info.py** - (—Ö–µ–Ω–¥–ª–µ—Ä—ã —Ä–∞—Å–ø–∏—Å–∞–Ω–∏—è, –ø—Ä–æ–µ–∫—Ç–∞ –∏ –º–µ–Ω—é)
- **crm2/services/users.py** (—Ñ—É–Ω–∫—Ü–∏–∏ —Ä–∞–±–æ—Ç—ã —Å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º–∏,


## –ë–∏–∑–Ω–µ—Å-–ø–æ—Ç–æ–∫
1. –ê–¥–º–∏–Ω ‚Üí ¬´‚öôÔ∏è –ê–¥–º–∏–Ω¬ª ‚Üí ¬´üßæ –ü–æ—Å–µ—â–∞–µ–º–æ—Å—Ç—å¬ª. –û—Ç–º–µ—á–∞–µ—Ç *present* –ø–æ `session_id`.
2. –ê–¥–º–∏–Ω ‚Üí ¬´üìö –î–æ–º–∞—à–Ω–∏–µ –∑–∞–¥–∞–Ω–∏—è¬ª ‚Üí `/homework_send <session_id> <url>`.
3. `/homework_status <session_id>` ‚Äî –ø—Ä–æ–≤–µ—Ä–∫–∞, `/homework_reset <session_id>` ‚Äî —Å–±—Ä–æ—Å –º–µ—Ç–æ–∫ –æ—Ç–ø—Ä–∞–≤–æ–∫.

## –ü—Ä–∏–º–µ—á–∞–Ω–∏—è –ø–æ –∫–æ–¥—É
- Aiogram 3.7+: `Bot(default=DefaultBotProperties(parse_mode="HTML"))`.
- –•–µ–Ω–¥–ª–µ—Ä—ã –ø–æ–¥–∫–ª—é—á–∞—é—Ç—Å—è –±–µ–∑–æ–ø–∞—Å–Ω–æ; –ø–∞–¥–µ–Ω–∏–µ –æ–¥–Ω–æ–≥–æ –º–æ–¥—É–ª—è –Ω–µ –±–ª–æ–∫–∏—Ä—É–µ—Ç –∑–∞–ø—É—Å–∫ ‚Äî –æ—à–∏–±–∫–∏ –ª–æ–≥–∏—Ä—É—é—Ç—Å—è.
- –†–∞–∑–¥–µ–ª–µ–Ω–∏–µ –∫–æ–Ω—Ñ–∏–≥–æ–≤: `.env.local` (–ª–æ–∫–∞–ª—å–Ω–æ) –∏ `.env.prod` (VPS).

## –ò–∑–º–µ–Ω–µ–Ω–∏—è –≤ —ç—Ç–æ–º –∞—Ä—Ö–∏–≤–µ
{
  "panel.py": "+ router hint",
  "admin_attendance.py": "+ router hint",
  "admin_homework.py": "+ router hint",
  "admin_db.py": "+ router hint"
}

## –†–µ–≤–∏–∑–∏—è –ø—Ä–æ–µ–∫—Ç–∞
- **data/clearing_completion.py** ‚Äî –æ—á–∏—Å—Ç–∫–∞ –∏ –ø–µ—Ä–µ–∑–∞–ø–æ–ª–Ω–µ–Ω–∏–µ —Ç–∞–±–ª–∏—Ü—ã session_days, –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Å—Ç—Ä—É–∫—Ç—É—Ä—ã –±–∞–∑—ã –∏ –∑–∞–ø–æ–ª–Ω–µ–Ω–∏–µ —Ä–∞—Å–ø–∏—Å–∞–Ω–∏–µ–º –∏–∑ Excel.
- **db/__init__.py** ‚Äî –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –º–æ–¥—É–ª—è –ë–î, —ç–∫—Å–ø–æ—Ä—Ç –æ–±—ä–µ–∫—Ç–æ–≤ –ë–î –∏ –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–æ–≥–æ –∞–¥–∞–ø—Ç–µ—Ä–∞.
- **db/attendance.py** ‚Äî —Ñ—É–Ω–∫—Ü–∏–∏ –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å –ø–æ—Å–µ—â–∞–µ–º–æ—Å—Ç—å—é (–ø–æ—Å–ª–µ–¥–Ω–∏–µ –∑–∞–ø–∏—Å–∏, —Å–≤–æ–¥–∫–∏).
- **db/auto_migrate.py** ‚Äî –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ —Å–æ–∑–¥–∞–Ω–∏–µ –∏ –º–∏–≥—Ä–∞—Ü–∏—è —Å—Ö–µ–º—ã –ë–î (–≤—Å–µ —Ç–∞–±–ª–∏—Ü—ã).
- **db/bootstrap.py** ‚Äî —Å–æ–∑–¥–∞–Ω–∏–µ –æ—Å–Ω–æ–≤–Ω—ã—Ö —Ç–∞–±–ª–∏—Ü –ø—Ä–∏ –∑–∞–ø—É—Å–∫–µ (users, cohorts, participants).
- **db/content_loader.py** ‚Äî —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è –∫–æ–Ω—Ç–µ–Ω—Ç–∞ –∏–∑ markdown-—Ñ–∞–π–ª–æ–≤ (pages –∏ news) –≤ –ë–î.
- **db/core.py** ‚Äî –µ–¥–∏–Ω–∞—è —Ç–æ—á–∫–∞ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è –∫ SQLite (get_db_connection).
- **db/events.py** ‚Äî —Ä–∞–±–æ—Ç–∞ —Å —Ç–∞–±–ª–∏—Ü–µ–π events (–ø–æ–¥—Å—á–µ—Ç –ø—Ä–µ–¥—Å—Ç–æ—è—â–∏—Ö —Å–æ–±—ã—Ç–∏–π).
- **db/migrate_admin.py** ‚Äî —Å–æ–∑–¥–∞–Ω–∏–µ —Ç–∞–±–ª–∏—Ü –¥–ª—è –∞–¥–º–∏–Ω-—Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª–∞ (–º–∞—Ç–µ—Ä–∏–∞–ª—ã, –∑–∞–¥–∞–Ω–∏—è, —Ä–∞—Å—Å—ã–ª–∫–∏).
- **db/schedule_loader.py** ‚Äî –∑–∞–≥—Ä—É–∑–∫–∞ –∏ —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è —Ä–∞—Å–ø–∏—Å–∞–Ω–∏—è –∏–∑ XLSX —Ñ–∞–π–ª–æ–≤ –≤ –ë–î.
- **db/schedule_repo.py** ‚Äî —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è –¥–∞–Ω–Ω—ã—Ö —Ä–∞—Å–ø–∏—Å–∞–Ω–∏—è (—Ç—Ä–µ–Ω–∏–Ω–≥–∏, –º–µ—Ä–æ–ø—Ä–∏—è—Ç–∏—è, —Ü–µ–ª–∏—Ç–µ–ª—å—Å–∫–∏–µ –ø—Ä–∏–µ–º—ã).
- **db/sessions.py** ‚Äî —Ñ—É–Ω–∫—Ü–∏–∏ –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å —Å–µ—Å—Å–∏—è–º–∏ –∏ –ø–æ–ª—É—á–µ–Ω–∏—è —Ä–∞—Å–ø–∏—Å–∞–Ω–∏—è –¥–ª—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π.
- **db/sqlite.py** ‚Äî –µ–¥–∏–Ω–∞—è —Ç–æ—á–∫–∞ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è –∫ SQLite (—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–æ–µ –∏ –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–æ–µ) —Å —Ä–µ–∂–∏–º–æ–º —Ç–æ–ª—å–∫–æ —á—Ç–µ–Ω–∏–µ.
- **db/users.py** ‚Äî —Ñ—É–Ω–∫—Ü–∏–∏ –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º–∏ (CRUD –æ–ø–µ—Ä–∞—Ü–∏–∏).
- **db/users_repo.py** ‚Äî —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º–∏ (–ø–∞–≥–∏–Ω–∞—Ü–∏—è, —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏—è –ø–æ –≥—Ä—É–ø–ø–∞–º).
- **handlers/admin/admin_homework.py** ‚Äî —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –¥–æ–º–∞—à–Ω–∏–º–∏ –∑–∞–¥–∞–Ω–∏—è–º–∏ (—Ä–∞—Å—Å—ã–ª–∫–∞, —Å—Ç–∞—Ç—É—Å, —Å–±—Ä–æ—Å).
- **handlers/admin/attendance.py** ‚Äî –æ—Ç–º–µ—Ç–∫–∞ –ø–æ—Å–µ—â–∞–µ–º–æ—Å—Ç–∏ —Å—Ç—É–¥–µ–Ω—Ç–æ–≤ –ø–æ –∫–æ–≥–æ—Ä—Ç–∞–º –∏ –¥–∞—Ç–∞–º.
- **handlers/admin/broadcast.py** ‚Äî –º–∞—Å—Å–æ–≤–∞—è —Ä–∞—Å—Å—ã–ª–∫–∞ —Å–æ–æ–±—â–µ–Ω–∏–π –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º.
- **handlers/admin/chatgpt.py** ‚Äî –ø—Ä–æ–≤–µ—Ä–∫–∞ —Å—Ç–∞—Ç—É—Å–∞ –¥–æ—Å—Ç—É–ø–∞ –∫ ChatGPT.
- **handlers/admin/db.py** ‚Äî —Ä–∞–∑–¥–µ–ª —Ä–∞–±–æ—Ç—ã —Å –±–∞–∑–æ–π –¥–∞–Ω–Ω—ã—Ö (–≤ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–µ).
- **handlers/admin/homework.py** ‚Äî —Ä–∞–∑–¥–µ–ª –¥–æ–º–∞—à–Ω–∏—Ö –∑–∞–¥–∞–Ω–∏–π (–≤ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–µ).
- **handlers/admin/logs.py** ‚Äî –ø—Ä–æ—Å–º–æ—Ç—Ä –ª–æ–≥–æ–≤ —Ä–∞—Å—Å—ã–ª–æ–∫ –∏ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏.
- **handlers/admin/panel.py** ‚Äî –≥–ª–∞–≤–Ω–æ–µ –º–µ–Ω—é –∞–¥–º–∏–Ω-–ø–∞–Ω–µ–ª–∏ —Å –Ω–∞–≤–∏–≥–∞—Ü–∏–µ–π.
- **handlers/admin/schedule.py** ‚Äî –ø—Ä–æ—Å–º–æ—Ç—Ä —Ä–∞—Å–ø–∏—Å–∞–Ω–∏—è (—Ç—Ä–µ–Ω–∏–Ω–≥–∏, –º–µ—Ä–æ–ø—Ä–∏—è—Ç–∏—è, —Ü–µ–ª–∏—Ç–µ–ª—å—Å–∫–∏–µ –ø—Ä–∏–µ–º—ã).
- **handlers/about.py** ‚Äî –æ–±—Ä–∞–±–æ—Ç—á–∏–∫ –∫–æ–º–∞–Ω–¥—ã /about (–∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ –ø—Ä–æ–µ–∫—Ç–µ).
- **handlers/admin_db.py** ‚Äî –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–∏–≤–Ω—ã–µ –∫–æ–º–∞–Ω–¥—ã –¥–ª—è –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∏ –∏ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è –ë–î.
- **handlers/admin/streams_fix.py** ‚Äî —É—Ç–∏–ª–∏—Ç–∞ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è –ø—Ä–∏–≤—è–∑–∫–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π –∫ –ø–æ—Ç–æ–∫–∞–º (—É—Å—Ç–∞—Ä–µ–≤—à–∞—è).
- **handlers/admin/users.py** ‚Äî –ø—Ä–æ—Å–º–æ—Ç—Ä –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π —Å —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏–µ–π –ø–æ –≥—Ä—É–ø–ø–∞–º –∏ –ø–∞–≥–∏–Ω–∞—Ü–∏–µ–π.
- **handlers/help.py** ‚Äî –æ–±—Ä–∞–±–æ—Ç—á–∏–∫ –∫–æ–º–∞–Ω–¥—ã /help, –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è–µ—Ç —Å–ø—Ä–∞–≤–∫—É –ø–æ —Ñ—É–Ω–∫—Ü–∏—è–º –±–æ—Ç–∞.
- **handlers/info.py** ‚Äî –º–Ω–æ–≥–æ—Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω—ã–π –º–æ–¥—É–ª—å: —Ä–∞—Å–ø–∏—Å–∞–Ω–∏–µ, –ò–ò-–∞–≥–µ–Ω—Ç—ã, –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ –ø—Ä–æ–µ–∫—Ç–µ.
- **handlers/main_menu.py** ‚Äî —Ü–µ–Ω—Ç—Ä–∞–ª—å–Ω–∞—è –Ω–∞–≤–∏–≥–∞—Ü–∏—è: –≥–ª–∞–≤–Ω–æ–µ –º–µ–Ω—é –¥–ª—è –≤—Å–µ—Ö —Ä–æ–ª–µ–π (–≥–æ—Å—Ç—å, –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å, –∞–¥–º–∏–Ω).
- **handlers/profile.py** ‚Äî –ª–∏—á–Ω—ã–π –∫–∞–±–∏–Ω–µ—Ç: –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –ø—Ä–æ—Ñ–∏–ª—è, —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø–æ—Ç–æ–∫–æ–º –∏ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è–º–∏.
- **handlers/registration.py** ‚Äî —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è –∏ —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –ø—Ä–æ—Ñ–∏–ª—è —Å FSM.
- **handlers/start.py** ‚Äî –æ–±—Ä–∞–±–æ—Ç—á–∏–∫ –∫–æ–º–∞–Ω–¥—ã /start, —Ç–æ—á–∫–∞ –≤—Ö–æ–¥–∞ –≤ —Å–∏—Å—Ç–µ–º—É —Å –≥–æ—Å—Ç–µ–≤—ã–º –º–µ–Ω—é.
- **handlers/stream_selfset.py** ‚Äî —Å–∞–º–æ—Å—Ç–æ—è—Ç–µ–ª—å–Ω–∞—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∞ —É—á–µ–±–Ω–æ–≥–æ –ø–æ—Ç–æ–∫–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–º.
- **handlers/welcome.py** ‚Äî –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –ø–æ—ç—Ç–∏—á–µ—Å–∫–æ–µ –ø—Ä–∏–≤–µ—Ç—Å—Ç–≤–∏–µ –Ω–æ–≤—ã—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π.
- **keyboards/init.py** ‚Äî —Ü–µ–Ω—Ç—Ä–∞–ª—å–Ω—ã–π —ç–∫—Å–ø–æ—Ä—Ç –≤—Å–µ—Ö –∫–ª–∞–≤–∏–∞—Ç—É—Ä —Å–∏—Å—Ç–µ–º—ã.
- **keyboards/_impl.py** ‚Äî –±–∞–∑–æ–≤–∞—è —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è —Ä–æ–ª–µ–≤—ã—Ö –∫–ª–∞–≤–∏–∞—Ç—É—Ä (–≥–æ—Å—Ç—å, –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å, –∞–¥–º–∏–Ω).
- **keyboards/admin_attendance.py** ‚Äî –∫–ª–∞–≤–∏–∞—Ç—É—Ä—ã —Å–∏—Å—Ç–µ–º—ã –ø–æ—Å–µ—â–∞–µ–º–æ—Å—Ç–∏: –≥–ª–∞–≤–Ω–æ–µ –º–µ–Ω—é –∏ —Å–ø–∏—Å–æ–∫ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π —Å–æ —Å—Ç–∞—Ç—É—Å–∞–º–∏.
- **keyboards/admin_panel.py** ‚Äî –æ—Å–Ω–æ–≤–Ω–∞—è Reply-–∫–ª–∞–≤–∏–∞—Ç—É—Ä–∞ –∞–¥–º–∏–Ω-–ø–∞–Ω–µ–ª–∏ —Å –Ω–∞–≤–∏–≥–∞—Ü–∏–µ–π –ø–æ 8 —Ä–∞–∑–¥–µ–ª–∞–º —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è.
- **keyboards/admin_schedule.py** ‚Äî inline-–∫–ª–∞–≤–∏–∞—Ç—É—Ä—ã —Ä–∞–∑–¥–µ–ª–∞ —Ä–∞—Å–ø–∏—Å–∞–Ω–∏—è: –º–µ–Ω—é, –≤—ã–±–æ—Ä –∫–æ–≥–æ—Ä—Ç –∏ –ø–∞–≥–∏–Ω–∞—Ü–∏—è.
- **keyboards/admin_users.py** ‚Äî inline-–∫–ª–∞–≤–∏–∞—Ç—É—Ä—ã —Ä–∞–∑–¥–µ–ª–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π: –≥—Ä—É–ø–ø—ã –∏ –ø–∞–≥–∏–Ω–∞—Ü–∏—è —Å–ø–∏—Å–∫–æ–≤.
- **keyboards/agents.py** ‚Äî Reply-–∫–ª–∞–≤–∏–∞—Ç—É—Ä–∞ –º–µ–Ω—é –ò–ò-–∞–≥–µ–Ω—Ç–æ–≤ —Å –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—è–º–∏ –ø–æ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—é ChatGPT.
- **keyboards/guest.py** ‚Äî –±–∞–∑–æ–≤–∞—è –∫–ª–∞–≤–∏–∞—Ç—É—Ä–∞ –≥–æ—Å—Ç–µ–≤–æ–≥–æ —Ä–µ–∂–∏–º–∞ (—Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è –∏ –ø–æ–º–æ—â—å).
- **keyboards/info_menu.py** ‚Äî –∞–¥–∞–ø—Ç–∏–≤–Ω–æ–µ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–æ–Ω–Ω–æ–µ –º–µ–Ω—é —Å –≤—ã–±–æ—Ä–æ–º –ø–æ—Ç–æ–∫–æ–≤ –∏ –º–µ—Ä–æ–ø—Ä–∏—è—Ç–∏–π.
- **keyboards/main_menu.py** ‚Äî —É–Ω–∏–≤–µ—Ä—Å–∞–ª—å–Ω–æ–µ –≥–ª–∞–≤–Ω–æ–µ –º–µ–Ω—é —Å–∏—Å—Ç–µ–º—ã —Å –ø–æ–¥–¥–µ—Ä–∂–∫–æ–π —Ä–æ–ª–µ–π.
- **keyboards/profile.py** ‚Äî –∫–ª–∞–≤–∏–∞—Ç—É—Ä–∞ –ª–∏—á–Ω–æ–≥–æ –∫–∞–±–∏–Ω–µ—Ç–∞ —Å –Ω–∞—Å—Ç—Ä–æ–π–∫–∞–º–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è.
- **keyboards/project.py** ‚Äî inline-–∫–ª–∞–≤–∏–∞—Ç—É—Ä–∞ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –æ –ø—Ä–æ–µ–∫—Ç–µ —Å –≤–Ω–µ—à–Ω–∏–º–∏ —Å—Å—ã–ª–∫–∞–º–∏.
- **keyboards/schedule.py** ‚Äî –∫–ª–∞–≤–∏–∞—Ç—É—Ä—ã –∏ —É—Ç–∏–ª–∏—Ç—ã –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å —Ä–∞—Å–ø–∏—Å–∞–Ω–∏–µ–º: –≥–ª–∞–≤–Ω–æ–µ –º–µ–Ω—é, –¥–∞—Ç—ã —Å–µ—Å—Å–∏–π, —Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ.
- **keyboards/session_picker.py** ‚Äî —Å–ø–µ—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω–∞—è –∫–ª–∞–≤–∏–∞—Ç—É—Ä–∞ –¥–ª—è –≤—ã–±–æ—Ä–∞ —Å–µ—Å—Å–∏–π —Å –¥–∞—Ç–∞–º–∏ –∏ –∫–æ–¥–∞–º–∏ —Ç–µ–º.
- **middlewares/auth_middleware.py** ‚Äî middleware –ø—Ä–æ–≤–µ—Ä–∫–∏ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏ –≤—Ö–æ–¥—è—â–∏—Ö —Å–æ–æ–±—â–µ–Ω–∏–π —Å –∏—Å–∫–ª—é—á–µ–Ω–∏—è–º–∏ –¥–ª—è –≥–æ—Å—Ç–µ–≤—ã—Ö –∫–æ–º–∞–Ω–¥.
- **middlewares/callback_auth_middleware.py** ‚Äî middleware –ø—Ä–æ–≤–µ—Ä–∫–∏ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏ callback-–∑–∞–ø—Ä–æ—Å–æ–≤ —Å —Ä–∞—Å—à–∏—Ä–µ–Ω–Ω–æ–π –ª–æ–≥–∏–∫–æ–π –¥–ª—è –∞–¥–º–∏–Ω-–ø–∞–Ω–µ–ª–∏.
- **routers/init.py** ‚Äî –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –ø–∞–∫–µ—Ç–∞ –º–∞—Ä—à—Ä—É—Ç–∏–∑–∞—Ç–æ—Ä–æ–≤, —ç–∫—Å–ø–æ—Ä—Ç —Å—Ç–∞—Ä—Ç–æ–≤—ã—Ö –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–æ–≤.
- **routers/start.py** ‚Äî —É—Å—Ç–∞—Ä–µ–≤—à–∏–π –æ–±—Ä–∞–±–æ—Ç—á–∏–∫ –∫–æ–º–∞–Ω–¥—ã /start —Å —Ä–æ–ª–µ–≤–æ–π –Ω–∞–≤–∏–≥–∞—Ü–∏–µ–π (–¥—É–±–ª–∏—Ä—É–µ—Ç —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª handlers/start.py).
- **services/attendance.py** ‚Äî —Å–µ—Ä–≤–∏—Å–Ω—ã–π —Å–ª–æ–π –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å –ø–æ—Å–µ—â–∞–µ–º–æ—Å—Ç—å—é –∏ –î–ó (—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–∞—è –≤–µ—Ä—Å–∏—è —Å –ø–æ–ª–Ω—ã–º —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª–æ–º).
- **services/attendance2.py** ‚Äî —Å–µ—Ä–≤–∏—Å–Ω—ã–π —Å–ª–æ–π –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å –ø–æ—Å–µ—â–∞–µ–º–æ—Å—Ç—å—é –∏ –î–ó (–∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–∞—è –≤–µ—Ä—Å–∏—è, –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –≤ admin_homework.py).
- **services/chatgpt_status.py** ‚Äî –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞ –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç–∏ –ø–ª–∞—Ç–Ω–æ–≥–æ ChatGPT —Å –ø—Ä–æ–≤–µ—Ä–∫–æ–π –±–∞–ª–∞–Ω—Å–∞ –∏ –∫–≤–æ—Ç.
- **services/content_loader.py** ‚Äî –∑–∞–≥—Ä—É–∑–∫–∞ –∏ –ø—Ä–µ–æ–±—Ä–∞–∑–æ–≤–∞–Ω–∏–µ markdown-–∫–æ–Ω—Ç–µ–Ω—Ç–∞ –≤ –±–µ–∑–æ–ø–∞—Å–Ω—ã–π HTML –¥–ª—è Telegram.
- **services/database.py** ‚Äî –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–∞—è –æ–±–µ—Ä—Ç–∫–∞ –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å SQLite (execute, fetch_all, fetch_one).
- **services/participants.py** ‚Äî —Å–µ—Ä–≤–∏—Å –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å –ø—Ä–∏–≤—è–∑–∫–æ–π –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π –∫ —É—á–µ–±–Ω—ã–º –ø–æ—Ç–æ–∫–∞–º.
- **services/schedule.py** ‚Äî –∫–æ–º–ø–ª–µ–∫—Å–Ω–∞—è —Å–∏—Å—Ç–µ–º–∞ –∑–∞–≥—Ä—É–∑–∫–∏ —Ä–∞—Å–ø–∏—Å–∞–Ω–∏—è –∏–∑ XLSX –∏ –ë–î —Å –ø–æ–¥–¥–µ—Ä–∂–∫–æ–π —Ä–∞–∑–Ω—ã—Ö —Ñ–æ—Ä–º–∞—Ç–æ–≤.
- **services/services.py** ‚Äî –∑–∞–≥–ª—É—à–∫–∞ –¥–ª—è –±—É–¥—É—â–∏—Ö —Å–µ—Ä–≤–∏—Å–Ω—ã—Ö —Ñ—É–Ω–∫—Ü–∏–π (–ø—É—Å—Ç–æ–π —Ñ–∞–π–ª).
- **services/users.py** ‚Äî —Å–µ—Ä–≤–∏—Å –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º–∏: CRUD –æ–ø–µ—Ä–∞—Ü–∏–∏ –∏ —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø—Ä–æ—Ñ–∏–ª—è–º–∏.



# crm2/data/clearing_completion.py
# –ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ: –û—á–∏—Å—Ç–∫–∞ –∏ –ø–µ—Ä–µ–∑–∞–ø–æ–ª–Ω–µ–Ω–∏–µ —Ç–∞–±–ª–∏—Ü—ã session_days, –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Å—Ç—Ä—É–∫—Ç—É—Ä—ã –±–∞–∑—ã –∏ –∑–∞–ø–æ–ª–Ω–µ–Ω–∏–µ —Ä–∞—Å–ø–∏—Å–∞–Ω–∏–µ–º –∏–∑ Excel —Ñ–∞–π–ª–æ–≤
# –§—É–Ω–∫—Ü–∏–∏:
# - check_database_state - –ü—Ä–æ–≤–µ—Ä—è–µ—Ç —Ç–µ–∫—É—â–µ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö (–∫–æ–≥–æ—Ä—Ç—ã, —Ç–æ–ø–∏–∫–∏, —Å–µ—Å—Å–∏–∏)
# - parse_excel_to_session_days - –ü–∞—Ä—Å–∏—Ç Excel —Ñ–∞–π–ª –∏ –¥–æ–±–∞–≤–ª—è–µ—Ç –¥–∞–Ω–Ω—ã–µ –≤ session_days
# - main - –û—Å–Ω–æ–≤–Ω–∞—è —Ñ—É–Ω–∫—Ü–∏—è —Å–∫—Ä–∏–ø—Ç–∞: –ø—Ä–æ–≤–µ—Ä–∫–∞ —Å–æ—Å—Ç–æ—è–Ω–∏—è, –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ —Å–æ–ø–æ—Å—Ç–∞–≤–ª–µ–Ω–∏–µ —Ñ–∞–π–ª–æ–≤ –∏ –∫–æ–≥–æ—Ä—Ç, –æ—á–∏—Å—Ç–∫–∞ –∏ –∑–∞–ø–æ–ª–Ω–µ–Ω–∏–µ —Ç–∞–±–ª–∏—Ü—ã

# crm2/db/__init__.py
# –ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ: –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –º–æ–¥—É–ª—è –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö, —ç–∫—Å–ø–æ—Ä—Ç –æ–±—ä–µ–∫—Ç–æ–≤ –ë–î –∏ —Å–æ–∑–¥–∞–Ω–∏–µ –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–æ–≥–æ –∞–¥–∞–ø—Ç–µ—Ä–∞ –Ω–∞–¥ sqlite3
# –ö–ª–∞—Å—Å—ã:
# - Database - –ü—Ä–æ—Å—Ç–æ–π –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω—ã–π –∞–¥–∞–ø—Ç–µ—Ä –¥–ª—è –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è SQL-–∑–∞–ø—Ä–æ—Å–æ–≤ (execute, fetch_all, fetch_one)
# –§—É–Ω–∫—Ü–∏–∏:
# - get_db_connection - (–∏–º–ø–æ—Ä—Ç–∏—Ä—É–µ—Ç—Å—è –∏–∑ core) –ü–æ–ª—É—á–µ–Ω–∏–µ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è —Å –ë–î
# - get_upcoming_sessions - (–∏–º–ø–æ—Ä—Ç–∏—Ä—É–µ—Ç—Å—è –∏–∑ sessions) –ü–æ–ª—É—á–µ–Ω–∏–µ –ø—Ä–µ–¥—Å—Ç–æ—è—â–∏—Ö —Å–µ—Å—Å–∏–π
# - get_session_by_id - (–∏–º–ø–æ—Ä—Ç–∏—Ä—É–µ—Ç—Å—è –∏–∑ sessions) –ü–æ–ª—É—á–µ–Ω–∏–µ —Å–µ—Å—Å–∏–∏ –ø–æ ID

# crm2/db/attendance.py
# –ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ: –§—É–Ω–∫—Ü–∏–∏ –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å –ø–æ—Å–µ—â–∞–µ–º–æ—Å—Ç—å—é (–ø–æ–ª—É—á–µ–Ω–∏–µ –ø–æ—Å–ª–µ–¥–Ω–∏—Ö –∑–∞–ø–∏—Å–µ–π, —Å–≤–æ–¥–∫–∏)
# –§—É–Ω–∫—Ü–∏–∏:
# - get_last_attendance - –í–æ–∑–≤—Ä–∞—â–∞–µ—Ç –ø–æ—Å–ª–µ–¥–Ω–∏–µ –∑–∞–ø–∏—Å–∏ –ø–æ –ø–æ—Å–µ—â–∞–µ–º–æ—Å—Ç–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
# - get_summary - –í–æ–∑–≤—Ä–∞—â–∞–µ—Ç —Å–≤–æ–¥–∫—É –ø–æ—Å–µ—â–∞–µ–º–æ—Å—Ç–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è (present, absent, late)
# - _table_exists - –í—Å–ø–æ–º–æ–≥–∞—Ç–µ–ª—å–Ω–∞—è —Ñ—É–Ω–∫—Ü–∏—è –ø—Ä–æ–≤–µ—Ä–∫–∏ —Å—É—â–µ—Å—Ç–≤–æ–≤–∞–Ω–∏—è —Ç–∞–±–ª–∏—Ü—ã

# crm2/db/auto_migrate.py
# –ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ: –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ —Å–æ–∑–¥–∞–Ω–∏–µ –∏ –º–∏–≥—Ä–∞—Ü–∏—è —Å—Ö–µ–º—ã –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö (—Ç–∞–±–ª–∏—Ü—ã: topics, sessions, events, healing_sessions, user_flags, attendance, payments)
# –§—É–Ω–∫—Ü–∏–∏:
# - _exec - –í—Å–ø–æ–º–æ–≥–∞—Ç–µ–ª—å–Ω–∞—è —Ñ—É–Ω–∫—Ü–∏—è –¥–ª—è –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è SQL-–∑–∞–ø—Ä–æ—Å–∞
# - _has_column - –ü—Ä–æ–≤–µ—Ä—è–µ—Ç –Ω–∞–ª–∏—á–∏–µ —Å—Ç–æ–ª–±—Ü–∞ –≤ —Ç–∞–±–ª–∏—Ü–µ
# - ensure_topics_and_session_days - –°–æ–∑–¥–∞–µ—Ç —Ç–∞–±–ª–∏—Ü—ã topics –∏ sessions (—Å –∞–≤—Ç–æ-–º–∏–≥—Ä–∞—Ü–∏–µ–π –¥–ª—è –¥–æ–±–∞–≤–ª–µ–Ω–∏—è cohort_id)
# - ensure_events_and_healings - –°–æ–∑–¥–∞–µ—Ç —Ç–∞–±–ª–∏—Ü—ã events –∏ healing_sessions
# - ensure_user_flags_and_attendance - –°–æ–∑–¥–∞–µ—Ç —Ç–∞–±–ª–∏—Ü—ã user_flags, attendance –∏ payments
# - ensure_schedule_schema - –ü—É–±–ª–∏—á–Ω–∞—è —Ç–æ—á–∫–∞ –≤—Ö–æ–¥–∞ –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è –±–∞–∑–æ–≤—ã—Ö —Ç–∞–±–ª–∏—Ü —Ä–∞—Å–ø–∏—Å–∞–Ω–∏—è (—É—Å—Ç–∞—Ä–µ–≤—à–µ–µ, –¥–ª—è –æ–±—Ä–∞—Ç–Ω–æ–π —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç–∏)
# - ensure_all_schemas - –ï–¥–∏–Ω–∞—è —Ç–æ—á–∫–∞ –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è –≤—Å–µ—Ö –Ω–µ–æ–±—Ö–æ–¥–∏–º—ã—Ö —Ç–∞–±–ª–∏—Ü (–≤—ã–∑—ã–≤–∞–µ—Ç—Å—è –ø—Ä–∏ —Å—Ç–∞—Ä—Ç–µ –±–æ—Ç–∞)

# crm2/db/bootstrap.py
# –ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ: –°–æ–∑–¥–∞–Ω–∏–µ –æ—Å–Ω–æ–≤–Ω—ã—Ö —Ç–∞–±–ª–∏—Ü –ø—Ä–∏ –∑–∞–ø—É—Å–∫–µ (users, cohorts) - –∏–¥–µ–º–ø–æ—Ç–µ–Ω—Ç–Ω–æ
# –§—É–Ω–∫—Ü–∏–∏:
# - ensure_min_schema - –°–æ–∑–¥–∞–µ—Ç –æ—Å–Ω–æ–≤–Ω—ã–µ —Ç–∞–±–ª–∏—Ü—ã: users, cohorts (–µ—Å–ª–∏ –∏—Ö –Ω–µ—Ç)

# crm2/db/content_loader.py
# –ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ: –°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è –∫–æ–Ω—Ç–µ–Ω—Ç–∞ –∏–∑ markdown-—Ñ–∞–π–ª–æ–≤ (pages –∏ news) –≤ –±–∞–∑—É –¥–∞–Ω–Ω—ã—Ö
# –§—É–Ω–∫—Ü–∏–∏:
# - _parse_md - –ü–∞—Ä—Å–∏—Ç markdown-—Ñ–∞–π–ª, –∏–∑–≤–ª–µ–∫–∞—è –∑–∞–≥–æ–ª–æ–≤–æ–∫ (–∏–∑ –ø–µ—Ä–≤–æ–π —Å—Ç—Ä–æ–∫–∏ —Å #) –∏ —Ç–µ–ª–æ
# - sync_content_from_files - –°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∏—Ä—É–µ—Ç —Å—Ç—Ä–∞–Ω–∏—Ü—ã –∏ –Ω–æ–≤–æ—Å—Ç–∏ –∏–∑ –ø–∞–ø–æ–∫ content/pages –∏ content/news –≤ —Ç–∞–±–ª–∏—Ü—ã pages –∏ news

# crm2/db/core.py
# –ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ: –ü—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è–µ—Ç —Ñ—É–Ω–∫—Ü–∏—é –¥–ª—è –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è –∫ SQLite –±–∞–∑–µ –¥–∞–Ω–Ω—ã—Ö (–µ–¥–∏–Ω–∞—è —Ç–æ—á–∫–∞ –≤—Ö–æ–¥–∞)
# –§—É–Ω–∫—Ü–∏–∏:
# - get_db_connection - –í–æ–∑–≤—Ä–∞—â–∞–µ—Ç —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–µ —Å –±–∞–∑–æ–π –¥–∞–Ω–Ω—ã—Ö (—Å row_factory = sqlite3.Row)

# crm2/db/events.py
# –ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ: –†–∞–±–æ—Ç–∞ —Å —Ç–∞–±–ª–∏—Ü–µ–π events (–º–µ—Ä–æ–ø—Ä–∏—è—Ç–∏—è) - –ø–æ–¥—Å—á–µ—Ç –ø—Ä–µ–¥—Å—Ç–æ—è—â–∏—Ö —Å–æ–±—ã—Ç–∏–π
# –§—É–Ω–∫—Ü–∏–∏:
# - upcoming_events_count - –í–æ–∑–≤—Ä–∞—â–∞–µ—Ç –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –±—É–¥—É—â–∏—Ö –º–µ—Ä–æ–ø—Ä–∏—è—Ç–∏–π (–¥–∞—Ç–∞ >= —Å–µ–≥–æ–¥–Ω—è)

# crm2/db/migrate_admin.py
# –ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ: –°–æ–∑–¥–∞–Ω–∏–µ —Ç–∞–±–ª–∏—Ü –¥–ª—è –∞–¥–º–∏–Ω-—Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª–∞ (–º–∞—Ç–µ—Ä–∏–∞–ª—ã, –∑–∞–¥–∞–Ω–∏—è, —Ä–∞—Å—Å—ã–ª–∫–∏)
# –§—É–Ω–∫—Ü–∏–∏:
# - ensure_admin_schema - –°–æ–∑–¥–∞–µ—Ç —Ç–∞–±–ª–∏—Ü—ã: materials, assignments, broadcasts, broadcast_recipients (–µ—Å–ª–∏ –∏—Ö –Ω–µ—Ç)

# crm2/db/sqlite.py
# –ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ: –ï–¥–∏–Ω–∞—è —Ç–æ—á–∫–∞ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è –∫ SQLite (—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–æ–µ –∏ –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–æ–µ) —Å –ø–æ–¥–¥–µ—Ä–∂–∫–æ–π —Ä–µ–∂–∏–º–∞ —Ç–æ–ª—å–∫–æ —á—Ç–µ–Ω–∏–µ
# –§—É–Ω–∫—Ü–∏–∏:
# - _query_only_enabled - –ü—Ä–æ–≤–µ—Ä–∫–∞, –≤–∫–ª—é—á–µ–Ω –ª–∏ —Ä–µ–∂–∏–º —Ç–æ–ª—å–∫–æ —á—Ç–µ–Ω–∏—è (—á–µ—Ä–µ–∑ –ø–µ—Ä–µ–º–µ–Ω–Ω—É—é –æ–∫—Ä—É–∂–µ–Ω–∏—è CRM_DB_QUERY_ONLY)
# - _apply_pragmas_sync - –ü—Ä–∏–º–µ–Ω–µ–Ω–∏–µ PRAGMA –¥–ª—è —Å–∏–Ω—Ö—Ä–æ–Ω–Ω–æ–≥–æ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è
# - _apply_pragmas_async - –ü—Ä–∏–º–µ–Ω–µ–Ω–∏–µ PRAGMA –¥–ª—è –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–æ–≥–æ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è
# - get_db_connection - –°–∏–Ω—Ö—Ä–æ–Ω–Ω–æ–µ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ –ë–î (—Å –æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω—ã–º —Ä–µ–∂–∏–º–æ–º —Ç–æ–ª—å–∫–æ —á—Ç–µ–Ω–∏—è)
# - aget_db_connection - –ê—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–æ–µ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ –ë–î (—Å –æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω—ã–º —Ä–µ–∂–∏–º–æ–º —Ç–æ–ª—å–∫–æ —á—Ç–µ–Ω–∏—è)
# - ensure_schema - –ò–¥–µ–º–ø–æ—Ç–µ–Ω—Ç–Ω–æ–µ —Å–æ–∑–¥–∞–Ω–∏–µ –±–∞–∑–æ–≤—ã—Ö —Ç–∞–±–ª–∏—Ü users, cohorts, consents (–≤ —Ä–µ–∂–∏–º–µ –∑–∞–ø–∏—Å–∏)

# crm2/db/schedule_loader.py
# –ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ: –ó–∞–≥—Ä—É–∑–∫–∞ –∏ —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è —Ä–∞—Å–ø–∏—Å–∞–Ω–∏—è –∏–∑ XLSX —Ñ–∞–π–ª–æ–≤ –≤ –±–∞–∑—É –¥–∞–Ω–Ω—ã—Ö (—Ç–∞–±–ª–∏—Ü—ã topics –∏ session_days)
# –ö–ª–∞—Å—Å—ã:
# - Row - Dataclass –¥–ª—è –ø—Ä–µ–¥—Å—Ç–∞–≤–ª–µ–Ω–∏—è —Å—Ç—Ä–æ–∫–∏ —Ä–∞—Å–ø–∏—Å–∞–Ω–∏—è (date, code, title, annotation, cohort_id)
# –§—É–Ω–∫—Ü–∏–∏:
# - _norm - –ù–æ—Ä–º–∞–ª–∏–∑–∞—Ü–∏—è —Å—Ç—Ä–æ–∫–∏ –¥–ª—è —Å—Ä–∞–≤–Ω–µ–Ω–∏—è (—É–¥–∞–ª–µ–Ω–∏–µ –ª–∏—à–Ω–∏—Ö —Å–∏–º–≤–æ–ª–æ–≤, –ø—Ä–∏–≤–µ–¥–µ–Ω–∏–µ –∫ –Ω–∏–∂–Ω–µ–º—É —Ä–µ–≥–∏—Å—Ç—Ä—É)
# - _pick - –í—ã–±–æ—Ä –ø–µ—Ä–≤–æ–≥–æ —Å—É—â–µ—Å—Ç–≤—É—é—â–µ–≥–æ –∫–ª—é—á–∞ –∏–∑ —Å–ª–æ–≤–∞—Ä—è –ø–æ —Å–ø–∏—Å–∫—É –∫–∞–Ω–¥–∏–¥–∞—Ç–æ–≤
# - _detect_cohort_from_filename - –ò–∑–≤–ª–µ—á–µ–Ω–∏–µ –Ω–æ–º–µ—Ä–∞ –∫–æ–≥–æ—Ä—Ç—ã –∏–∑ –∏–º–µ–Ω–∏ —Ñ–∞–π–ª–∞
# - _iter_xlsx - –ò—Ç–µ—Ä–∞—Ç–æ—Ä –ø–æ —Å—Ç—Ä–æ–∫–∞–º XLSX —Ñ–∞–π–ª–∞, –ø—Ä–µ–æ–±—Ä–∞–∑—É—é—â–∏–π –¥–∞–Ω–Ω—ã–µ –≤ –æ–±—ä–µ–∫—Ç—ã Row
# - sync_schedule_from_files - –°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è —Ä–∞—Å–ø–∏—Å–∞–Ω–∏—è –∏–∑ —Å–ø–∏—Å–∫–∞ —Ñ–∞–π–ª–æ–≤ –≤ –ë–î
# - list_schedule_files - –ü–æ–∏—Å–∫ —Ñ–∞–π–ª–æ–≤ —Ä–∞—Å–ø–∏—Å–∞–Ω–∏—è –ø–æ —à–∞–±–ª–æ–Ω—É –≤ –∫–æ—Ä–Ω–µ –ø—Ä–æ–µ–∫—Ç–∞
# - sync_schedule_autodiscover - –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –æ–±–Ω–∞—Ä—É–∂–µ–Ω–∏–µ —Ñ–∞–π–ª–æ–≤ —Ä–∞—Å–ø–∏—Å–∞–Ω–∏—è –∏ –∏—Ö —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è

# crm2/db/schedule_repo.py
# –ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ: –†–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è –¥–∞–Ω–Ω—ã—Ö —Ä–∞—Å–ø–∏—Å–∞–Ω–∏—è (—Ç—Ä–µ–Ω–∏–Ω–≥–∏, –º–µ—Ä–æ–ø—Ä–∏—è—Ç–∏—è, —Ü–µ–ª–∏—Ç–µ–ª—å—Å–∫–∏–µ –ø—Ä–∏–µ–º—ã) –∏–∑ –ë–î
# –§—É–Ω–∫—Ü–∏–∏:
# - _dicts - –ü—Ä–µ–æ–±—Ä–∞–∑–æ–≤–∞–Ω–∏–µ —Å–ø–∏—Å–∫–∞ —Å—Ç—Ä–æ–∫ sqlite3.Row –≤ —Å–ø–∏—Å–æ–∫ —Å–ª–æ–≤–∞—Ä–µ–π
# - count_trainings - –ü–æ–¥—Å—á–µ—Ç –∫–æ–ª–∏—á–µ—Å—Ç–≤–∞ —Ç—Ä–µ–Ω–∏—Ä–æ–≤–æ–∫ (session_days) –¥–ª—è –∫–æ–≥–æ—Ä—Ç—ã
# - list_trainings - –ü–æ–ª—É—á–µ–Ω–∏–µ —Å–ø–∏—Å–∫–∞ —Ç—Ä–µ–Ω–∏—Ä–æ–≤–æ–∫ –¥–ª—è –∫–æ–≥–æ—Ä—Ç—ã —Å –ø–∞–≥–∏–Ω–∞—Ü–∏–µ–π
# - count_events - –ü–æ–¥—Å—á–µ—Ç –∫–æ–ª–∏—á–µ—Å—Ç–≤–∞ –º–µ—Ä–æ–ø—Ä–∏—è—Ç–∏–π
# - list_events - –ü–æ–ª—É—á–µ–Ω–∏–µ —Å–ø–∏—Å–∫–∞ –º–µ—Ä–æ–ø—Ä–∏—è—Ç–∏–π —Å –ø–∞–≥–∏–Ω–∞—Ü–∏–µ–π
# - count_healings - –ü–æ–¥—Å—á–µ—Ç –∫–æ–ª–∏—á–µ—Å—Ç–≤–∞ —Ü–µ–ª–∏—Ç–µ–ª—å—Å–∫–∏—Ö –ø—Ä–∏–µ–º–æ–≤
# - list_healings - –ü–æ–ª—É—á–µ–Ω–∏–µ —Å–ø–∏—Å–∫–∞ —Ü–µ–ª–∏—Ç–µ–ª—å—Å–∫–∏—Ö –ø—Ä–∏–µ–º–æ–≤ —Å –ø–∞–≥–∏–Ω–∞—Ü–∏–µ–π
# - count_all - –ü–æ–¥—Å—á–µ—Ç –æ–±—â–µ–≥–æ –∫–æ–ª–∏—á–µ—Å—Ç–≤–∞ –∑–∞–ø–∏—Å–µ–π –≤ —Ä–∞—Å–ø–∏—Å–∞–Ω–∏–∏ (—Ç—Ä–µ–Ω–∏–Ω–≥–∏ + –º–µ—Ä–æ–ø—Ä–∏—è—Ç–∏—è + —Ü–µ–ª–∏—Ç–µ–ª—å—Å–∫–∏–µ –ø—Ä–∏–µ–º—ã)
# - list_all - –ü–æ–ª—É—á–µ–Ω–∏–µ –æ–±—â–µ–≥–æ —Ä–∞—Å–ø–∏—Å–∞–Ω–∏—è (–≤—Å–µ —Ç–∏–ø—ã —Å–æ–±—ã—Ç–∏–π) —Å –ø–∞–≥–∏–Ω–∞—Ü–∏–µ–π

# crm2/db/sessions.py
# –ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ: –§—É–Ω–∫—Ü–∏–∏ –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å —Å–µ—Å—Å–∏—è–º–∏ (—Ç—Ä–µ–Ω–∏–Ω–≥–∏, –º–µ—Ä–æ–ø—Ä–∏—è—Ç–∏—è) –∏ –ø–æ–ª—É—á–µ–Ω–∏—è —Ä–∞—Å–ø–∏—Å–∞–Ω–∏—è –¥–ª—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
# –§—É–Ω–∫—Ü–∏–∏:
# - get_session_detail_by_cohort_and_date - –ü–æ–ª—É—á–µ–Ω–∏–µ –¥–µ—Ç–∞–ª–µ–π —Å–µ—Å—Å–∏–∏ –ø–æ –∫–æ–≥–æ—Ä—Ç–µ –∏ –¥–∞—Ç–µ
# - _table_exists - –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å—É—â–µ—Å—Ç–≤–æ–≤–∞–Ω–∏—è —Ç–∞–±–ª–∏—Ü—ã –≤ –ë–î
# - _cols - –ü–æ–ª—É—á–µ–Ω–∏–µ —Å–ø–∏—Å–∫–∞ —Å—Ç–æ–ª–±—Ü–æ–≤ —Ç–∞–±–ª–∏—Ü—ã
# - _pick - –í—ã–±–æ—Ä –ø–µ—Ä–≤–æ–≥–æ —Å—É—â–µ—Å—Ç–≤—É—é—â–µ–≥–æ —Å—Ç–æ–ª–±—Ü–∞ –∏–∑ —Å–ø–∏—Å–∫–∞ –∫–∞–Ω–¥–∏–¥–∞—Ç–æ–≤
# - _safe_title_from_table - –ë–µ–∑–æ–ø–∞—Å–Ω–æ–µ –ø–æ–ª—É—á–µ–Ω–∏–µ –∑–∞–≥–æ–ª–æ–≤–∫–∞ –∏–∑ —Ç–∞–±–ª–∏—Ü—ã –ø–æ ID
# - get_user_cohort_title_by_tg - –ü–æ–ª—É—á–µ–Ω–∏–µ –∫–æ–≥–æ—Ä—Ç—ã –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –∏ –µ–µ –Ω–∞–∑–≤–∞–Ω–∏—è –ø–æ Telegram ID
# - _select_from_session_days - –í—ã–±–æ—Ä–∫–∞ –∏–∑ session_days (—Å –≥—Ä—É–ø–ø–∏—Ä–æ–≤–∫–æ–π –ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω—ã—Ö –¥–Ω–µ–π)
# - _select_from_sessions - –í—ã–±–æ—Ä–∫–∞ –∏–∑ —Ç–∞–±–ª–∏—Ü—ã sessions
# - _select_from_events - –í—ã–±–æ—Ä–∫–∞ –∏–∑ —Ç–∞–±–ª–∏—Ü—ã events
# - get_upcoming_sessions - –ü–æ–ª—É—á–µ–Ω–∏–µ –ø—Ä–µ–¥—Å—Ç–æ—è—â–∏—Ö —Å–µ—Å—Å–∏–π –¥–ª—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è (—Å —É—á–µ—Ç–æ–º –µ–≥–æ –∫–æ–≥–æ—Ä—Ç—ã)
# - get_session_by_id - –ü–æ–ª—É—á–µ–Ω–∏–µ —Å–µ—Å—Å–∏–∏ –ø–æ ID (–∏–∑ sessions, events –∏–ª–∏ session_days)
# - get_upcoming_sessions_by_cohort - –ü–æ–ª—É—á–µ–Ω–∏–µ –ø—Ä–µ–¥—Å—Ç–æ—è—â–∏—Ö —Å–µ—Å—Å–∏–π –¥–ª—è –∫–æ–≥–æ—Ä—Ç—ã
# - get_nearest_session_text - –ü–æ–ª—É—á–µ–Ω–∏–µ —Ç–µ–∫—Å—Ç–æ–≤–æ–π —Å—Ç—Ä–æ–∫–∏ —Å –±–ª–∏–∂–∞–π—à–∏–º –∑–∞–Ω—è—Ç–∏–µ–º
# - get_recent_past_sessions_by_cohort - –ü–æ–ª—É—á–µ–Ω–∏–µ –ø–æ—Å–ª–µ–¥–Ω–∏—Ö –ø—Ä–æ—à–µ–¥—à–∏—Ö —Å–µ—Å—Å–∏–π –¥–ª—è –∫–æ–≥–æ—Ä—Ç—ã

# crm2/db/users.py
# –ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ: –§—É–Ω–∫—Ü–∏–∏ –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º–∏ (CRUD –æ–ø–µ—Ä–∞—Ü–∏–∏)
# –§—É–Ω–∫—Ü–∏–∏:
# - get_db_connection - –ü–æ–ª—É—á–µ–Ω–∏–µ —Å–∏–Ω—Ö—Ä–æ–Ω–Ω–æ–≥–æ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è —Å –ë–î (—Å row_factory=sqlite3.Row)
# - _row_to_dict - –ü—Ä–µ–æ–±—Ä–∞–∑–æ–≤–∞–Ω–∏–µ —Å—Ç—Ä–æ–∫–∏ sqlite3.Row –≤ —Å–ª–æ–≤–∞—Ä—å
# - list_users - –ü–æ–ª—É—á–µ–Ω–∏–µ —Å–ø–∏—Å–∫–∞ –≤—Å–µ—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
# - list_users_by_role - –ü–æ–ª—É—á–µ–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π –ø–æ —Ä–æ–ª–∏
# - list_users_by_cohort - –ü–æ–ª—É—á–µ–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π –ø–æ –∫–æ–≥–æ—Ä—Ç–µ
# - get_user_by_tg - –ü–æ–ª—É—á–µ–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –ø–æ Telegram ID
# - get_user_by_nickname - –ü–æ–ª—É—á–µ–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –ø–æ –Ω–∏–∫–Ω–µ–π–º—É
# - delete_user_by_tg - –£–¥–∞–ª–µ–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –ø–æ Telegram ID
# - upsert_user - –°–æ–∑–¥–∞–Ω–∏–µ –∏–ª–∏ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è

# crm2/db/users_repo.py
# –ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ: –†–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º–∏ —Å –ø–∞–≥–∏–Ω–∞—Ü–∏–µ–π –∏ —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏–µ–π –ø–æ –≥—Ä—É–ø–ø–∞–º (–∫–æ–≥–æ—Ä—Ç—ã, —Ä–æ–ª–∏)
# –§—É–Ω–∫—Ü–∏–∏:
# - _users_columns - –ü–æ–ª—É—á–µ–Ω–∏–µ —Å–ø–∏—Å–∫–∞ –∫–æ–ª–æ–Ω–æ–∫ —Ç–∞–±–ª–∏—Ü—ã users
# - _cohort_expr - –ì–µ–Ω–µ—Ä–∞—Ü–∏—è SQL-–≤—ã—Ä–∞–∂–µ–Ω–∏—è –¥–ª—è –ø–æ–ª—è –∫–æ–≥–æ—Ä—Ç—ã —Å —É—á–µ—Ç–æ–º —Å—Ç—Ä—É–∫—Ç—É—Ä—ã –ë–î
# - _where_for_group - –ì–µ–Ω–µ—Ä–∞—Ü–∏—è WHERE-—É—Å–ª–æ–≤–∏—è –¥–ª—è —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π –ø–æ –≥—Ä—É–ø–ø–∞–º
# - _row_to_dict - –ü—Ä–µ–æ–±—Ä–∞–∑–æ–≤–∞–Ω–∏–µ —Å—Ç—Ä–æ–∫–∏ sqlite3.Row –≤ —Å–ª–æ–≤–∞—Ä—å
# - count_users - –ü–æ–¥—Å—á–µ—Ç –∫–æ–ª–∏—á–µ—Å—Ç–≤–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π –≤ —É–∫–∞–∑–∞–Ω–Ω–æ–π –≥—Ä—É–ø–ø–µ
# - list_users - –ü–æ–ª—É—á–µ–Ω–∏–µ —Å–ø–∏—Å–∫–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π –≤ –≥—Ä—É–ø–ø–µ —Å –ø–∞–≥–∏–Ω–∞—Ü–∏–µ–π

# crm2/handlers/admin/admin_homework.py
# –ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ: –û–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ –∞–¥–º–∏–Ω-–ø–∞–Ω–µ–ª–∏ –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –¥–æ–º–∞—à–Ω–∏–º–∏ –∑–∞–¥–∞–Ω–∏—è–º–∏ (—Ä–∞—Å—Å—ã–ª–∫–∞, —Å—Ç–∞—Ç—É—Å, —Å–±—Ä–æ—Å)
# –ö–ª–∞—Å—Å—ã:
# - HW - FSM —Å–æ—Å—Ç–æ—è–Ω–∏—è –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å –¥–æ–º–∞—à–Ω–∏–º–∏ –∑–∞–¥–∞–Ω–∏—è–º–∏ (awaiting_link, chosen_session)
# –§—É–Ω–∫—Ü–∏–∏:
# - _kb - –°–æ–∑–¥–∞–Ω–∏–µ InlineKeyboardMarkup –∏–∑ —Å–ø–∏—Å–∫–∞ –∫–Ω–æ–ø–æ–∫
# - homework_menu_markup - –°–æ–∑–¥–∞–Ω–∏–µ –∫–ª–∞–≤–∏–∞—Ç—É—Ä—ã –≥–ª–∞–≤–Ω–æ–≥–æ –º–µ–Ω—é –¥–æ–º–∞—à–Ω–∏—Ö –∑–∞–¥–∞–Ω–∏–π
# - _sessions_list_kb - –°–æ–∑–¥–∞–Ω–∏–µ –∫–ª–∞–≤–∏–∞—Ç—É—Ä—ã —Å–ø–∏—Å–∫–∞ —Å–µ—Å—Å–∏–π –¥–ª—è –≤—ã–±–æ—Ä–∞
# - _session_actions_kb - –°–æ–∑–¥–∞–Ω–∏–µ –∫–ª–∞–≤–∏–∞—Ç—É—Ä—ã –¥–µ–π—Å—Ç–≤–∏–π –¥–ª—è –≤—ã–±—Ä–∞–Ω–Ω–æ–π —Å–µ—Å—Å–∏–∏
# –û–±—Ä–∞–±–æ—Ç—á–∏–∫–∏:
# - admin_homework_entry - –í—Ö–æ–¥ –≤ —Ä–∞–∑–¥–µ–ª –¥–æ–º–∞—à–Ω–∏—Ö –∑–∞–¥–∞–Ω–∏–π
# - cb_hw_menu - –í–æ–∑–≤—Ä–∞—Ç –≤ –º–µ–Ω—é –¥–æ–º–∞—à–Ω–∏—Ö –∑–∞–¥–∞–Ω–∏–π
# - cb_hw_list - –ü–æ–∫–∞–∑ —Å–ø–∏—Å–∫–∞ –±–ª–∏–∂–∞–π—à–∏—Ö —Å–µ—Å—Å–∏–π
# - cb_hw_session - –û–±—Ä–∞–±–æ—Ç–∫–∞ –≤—ã–±–æ—Ä–∞ —Å–µ—Å—Å–∏–∏
# - cb_hw_send_ask_link - –ó–∞–ø—Ä–æ—Å —Å—Å—ã–ª–∫–∏ –Ω–∞ –î–ó –¥–ª—è –≤—ã–±—Ä–∞–Ω–Ω–æ–π —Å–µ—Å—Å–∏–∏
# - hw_got_links - –û–±—Ä–∞–±–æ—Ç–∫–∞ –ø–æ–ª—É—á–µ–Ω–Ω—ã—Ö —Å—Å—ã–ª–æ–∫ –∏ —Ä–∞—Å—Å—ã–ª–∫–∞ –î–ó
# - cb_hw_status_ask, cb_hw_status - –ü—Ä–æ—Å–º–æ—Ç—Ä —Å—Ç–∞—Ç—É—Å–∞ –¥–æ—Å—Ç–∞–≤–∫–∏ –î–ó
# - cb_hw_reset_info - –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ —Å–±—Ä–æ—Å–µ –æ—Ç–º–µ—Ç–æ–∫ (–∑–∞–≥–ª—É—à–∫–∞)

# crm2/handlers/admin/attendance.py
# –ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ: –û–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ –∞–¥–º–∏–Ω-–ø–∞–Ω–µ–ª–∏ –¥–ª—è –æ—Ç–º–µ—Ç–∫–∏ –ø–æ—Å–µ—â–∞–µ–º–æ—Å—Ç–∏ —Å—Ç—É–¥–µ–Ω—Ç–æ–≤ –ø–æ –∫–æ–≥–æ—Ä—Ç–∞–º –∏ –¥–∞—Ç–∞–º
# –ö–æ–Ω—Å—Ç–∞–Ω—Ç—ã:
# - ATTENDANCE_STATUSES - –°–ª–æ–≤–∞—Ä—å —Å—Ç–∞—Ç—É—Å–æ–≤ –ø–æ—Å–µ—â–∞–µ–º–æ—Å—Ç–∏ —Å emoji
# –§—É–Ω–∫—Ü–∏–∏:
# - admin_attendance_entry - –í—Ö–æ–¥–Ω–∞—è —Ç–æ—á–∫–∞ —Ä–∞–∑–¥–µ–ª–∞ –ø–æ—Å–µ—â–∞–µ–º–æ—Å—Ç–∏
# - show_attendance_main - –ì–ª–∞–≤–Ω–æ–µ –º–µ–Ω—é –ø–æ—Å–µ—â–∞–µ–º–æ—Å—Ç–∏ —Å —Å–µ–≥–æ–¥–Ω—è—à–Ω–∏–º–∏ –∑–∞–Ω—è—Ç–∏—è–º–∏
# - show_date_selection - –í—ã–±–æ—Ä –¥–∞—Ç—ã –∑–∞–Ω—è—Ç–∏–π –¥–ª—è –∫–æ–≥–æ—Ä—Ç—ã
# - show_attendance_marking - –ò–Ω—Ç–µ—Ä—Ñ–µ–π—Å –æ—Ç–º–µ—Ç–∫–∏ –ø–æ—Å–µ—â–µ–Ω–∏—è –¥–ª—è —Å–µ—Å—Å–∏–∏ (–∏—Å–ø–æ–ª—å–∑—É–µ—Ç users.cohort_id)
# –û–±—Ä–∞–±–æ—Ç—á–∏–∫–∏:
# - back_to_attendance_main - –í–æ–∑–≤—Ä–∞—Ç –≤ –≥–ª–∞–≤–Ω–æ–µ –º–µ–Ω—é –ø–æ—Å–µ—â–∞–µ–º–æ—Å—Ç–∏
# - admin_attendance_handler - –û–±—Ä–∞–±–æ—Ç—á–∏–∫ –∫–Ω–æ–ø–∫–∏ "–ü–æ—Å–µ—â–∞–µ–º–æ—Å—Ç—å" –≤ –∞–¥–º–∏–Ω-–ø–∞–Ω–µ–ª–∏
# - choose_cohort - –í—ã–±–æ—Ä –∫–æ–≥–æ—Ä—Ç—ã –¥–ª—è –æ—Ç–º–µ—Ç–∫–∏ –ø–æ—Å–µ—â–∞–µ–º–æ—Å—Ç–∏
# - process_cohort_selection - –û–±—Ä–∞–±–æ—Ç–∫–∞ –≤—ã–±–æ—Ä–∞ –∫–æ–≥–æ—Ä—Ç—ã –∏ –ø–µ—Ä–µ—Ö–æ–¥ –∫ –≤—ã–±–æ—Ä—É –¥–∞—Ç—ã
# - process_student_attendance - –û–±—Ä–∞–±–æ—Ç–∫–∞ –≤—ã–±–æ—Ä–∞ —Å—Ç—É–¥–µ–Ω—Ç–∞ –¥–ª—è –∏–∑–º–µ–Ω–µ–Ω–∏—è —Å—Ç–∞—Ç—É—Å–∞
# - set_attendance_status - –£—Å—Ç–∞–Ω–æ–≤–∫–∞ —Å—Ç–∞—Ç—É—Å–∞ –ø–æ—Å–µ—â–∞–µ–º–æ—Å—Ç–∏ –¥–ª—è —Å—Ç—É–¥–µ–Ω—Ç–∞
# - test_simple - –¢–µ—Å—Ç–æ–≤—ã–π –æ–±—Ä–∞–±–æ—Ç—á–∏–∫

# crm2/handlers/admin/broadcast.py
# –ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ: –û–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ –∞–¥–º–∏–Ω-–ø–∞–Ω–µ–ª–∏ –¥–ª—è –º–∞—Å—Å–æ–≤–æ–π —Ä–∞—Å—Å—ã–ª–∫–∏ —Å–æ–æ–±—â–µ–Ω–∏–π –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º
# –ö–ª–∞—Å—Å—ã:
# - BroadcastFSM - FSM —Å–æ—Å—Ç–æ—è–Ω–∏—è –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è —Ä–∞—Å—Å—ã–ª–∫–∏ (audience, cohort, text, attach, confirm)
# –§—É–Ω–∫—Ü–∏–∏:
# - audience_kb - –ö–ª–∞–≤–∏–∞—Ç—É—Ä–∞ –≤—ã–±–æ—Ä–∞ –∞—É–¥–∏—Ç–æ—Ä–∏–∏ —Ä–∞—Å—Å—ã–ª–∫–∏
# - cohorts_kb - –ö–ª–∞–≤–∏–∞—Ç—É—Ä–∞ –≤—ã–±–æ—Ä–∞ –∫–æ–≥–æ—Ä—Ç—ã –¥–ª—è —Ä–∞—Å—Å—ã–ª–∫–∏
# - confirm_kb - –ö–ª–∞–≤–∏–∞—Ç—É—Ä–∞ –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è —Ä–∞—Å—Å—ã–ª–∫–∏
# - preview - –ü—Ä–µ–¥–ø—Ä–æ—Å–º–æ—Ç—Ä —Ä–∞—Å—Å—ã–ª–∫–∏ –ø–µ—Ä–µ–¥ –æ—Ç–ø—Ä–∞–≤–∫–æ–π
# –û–±—Ä–∞–±–æ—Ç—á–∏–∫–∏:
# - start_broadcast - –ù–∞—á–∞–ª–æ —Å–æ–∑–¥–∞–Ω–∏—è —Ä–∞—Å—Å—ã–ª–∫–∏
# - choose_audience - –í—ã–±–æ—Ä –∞—É–¥–∏—Ç–æ—Ä–∏–∏ (–≤—Å–µ–º –∏–ª–∏ –ø–æ –∫–æ–≥–æ—Ä—Ç–µ)
# - set_cohort - –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∫–æ–≥–æ—Ä—Ç—ã –¥–ª—è —Ä–∞—Å—Å—ã–ª–∫–∏
# - set_text - –ü–æ–ª—É—á–µ–Ω–∏–µ —Ç–µ–∫—Å—Ç–∞ —Ä–∞—Å—Å—ã–ª–∫–∏
# - no_attach - –ü–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ –æ—Ç—Å—É—Ç—Å—Ç–≤–∏—è —Ñ–∞–π–ª–∞
# - with_attach - –û–±—Ä–∞–±–æ—Ç–∫–∞ –ø—Ä–∏–∫—Ä–µ–ø–ª–µ–Ω–Ω–æ–≥–æ —Ñ–∞–π–ª–∞
# - back_to_text - –í–æ–∑–≤—Ä–∞—Ç –∫ —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏—é —Ç–µ–∫—Å—Ç–∞
# - do_send - –í—ã–ø–æ–ª–Ω–µ–Ω–∏–µ —Ä–∞—Å—Å—ã–ª–∫–∏ —Å —Ç—Ä–æ—Ç—Ç–ª–∏–Ω–≥–æ–º
# - cancel_bc - –û—Ç–º–µ–Ω–∞ —Ä–∞—Å—Å—ã–ª–∫–∏
# - back_bc - –í–æ–∑–≤—Ä–∞—Ç –∫ –≤—ã–±–æ—Ä—É –∞—É–¥–∏—Ç–æ—Ä–∏–∏

# crm2/handlers/admin/chatgpt.py
# –ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ: –û–±—Ä–∞–±–æ—Ç—á–∏–∫ –∫–Ω–æ–ø–∫–∏ ¬´ü§ñ ChatGPT¬ª –≤ –∞–¥–º–∏–Ω-–ø–∞–Ω–µ–ª–∏ –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏ —Å—Ç–∞—Ç—É—Å–∞ –¥–æ—Å—Ç—É–ø–∞
# –§—É–Ω–∫—Ü–∏–∏:
# - admin_chatgpt_entry - –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å—Ç–∞—Ç—É—Å–∞ –¥–æ—Å—Ç—É–ø–∞ –∫ ChatGPT –∏ –æ—Ç–ø—Ä–∞–≤–∫–∞ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞ –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä—É

# crm2/handlers/admin/db.py
# –ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ: –û–±—Ä–∞–±–æ—Ç—á–∏–∫ —Ä–∞–∑–¥–µ–ª–∞ —Ä–∞–±–æ—Ç—ã —Å –±–∞–∑–æ–π –¥–∞–Ω–Ω—ã—Ö –≤ –∞–¥–º–∏–Ω-–ø–∞–Ω–µ–ª–∏
# –§—É–Ω–∫—Ü–∏–∏:
# - admin_db - –í—Ö–æ–¥–Ω–∞—è —Ç–æ—á–∫–∞ —Ä–∞–∑–¥–µ–ª–∞ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö
# - _db_kb - –°–æ–∑–¥–∞–Ω–∏–µ –∫–ª–∞–≤–∏–∞—Ç—É—Ä—ã –º–µ–Ω—é —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –ë–î
# –û–±—Ä–∞–±–æ—Ç—á–∏–∫–∏:
# - handle_db_diagnostics - –î–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞ —Å–æ—Å—Ç–æ—è–Ω–∏—è –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö
# - handle_db_fix - –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Å—Ç—Ä—É–∫—Ç—É—Ä—ã –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö
# - handle_db_stats - –ü—Ä–æ—Å–º–æ—Ç—Ä —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö
# - handle_db_back - –í–æ–∑–≤—Ä–∞—Ç –≤ –∞–¥–º–∏–Ω-–ø–∞–Ω–µ–ª—å

# crm2/handlers/admin/homework.py
# –ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ: –û–±—Ä–∞–±–æ—Ç—á–∏–∫ —Ä–∞–∑–¥–µ–ª–∞ –¥–æ–º–∞—à–Ω–∏—Ö –∑–∞–¥–∞–Ω–∏–π –≤ –∞–¥–º–∏–Ω-–ø–∞–Ω–µ–ª–∏ (–≤ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–µ)
# –§—É–Ω–∫—Ü–∏–∏:
# - admin_homework - –û–±—Ä–∞–±–æ—Ç—á–∏–∫ –∫–Ω–æ–ø–∫–∏ "–î–æ–º–∞—à–Ω–∏–µ –∑–∞–¥–∞–Ω–∏—è" –≤ –∞–¥–º–∏–Ω-–ø–∞–Ω–µ–ª–∏ (–∑–∞–≥–ª—É—à–∫–∞)
# - admin_homework_entry - –§—É–Ω–∫—Ü–∏—è –¥–ª—è –≤—Ö–æ–¥–∞ –≤ —Ä–∞–∑–¥–µ–ª –¥–æ–º–∞—à–Ω–∏—Ö –∑–∞–¥–∞–Ω–∏–π –∏–∑ panel.py

# crm2/handlers/admin/logs.py
# –ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ: –ü—Ä–æ—Å–º–æ—Ç—Ä –ª–æ–≥–æ–≤ —Ä–∞—Å—Å—ã–ª–æ–∫ –∏ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏ –≤ –∞–¥–º–∏–Ω-–ø–∞–Ω–µ–ª–∏
# –§—É–Ω–∫—Ü–∏–∏:
# - logs_menu_kb - –°–æ–∑–¥–∞–Ω–∏–µ –∫–ª–∞–≤–∏–∞—Ç—É—Ä—ã –º–µ–Ω—é –ª–æ–≥–æ–≤
# - logs_overview - –ü–æ–∫–∞–∑ –ø–æ—Å–ª–µ–¥–Ω–∏—Ö —Ä–∞—Å—Å—ã–ª–æ–∫ —Å –∏—Ö —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–æ–π (–æ—Ç–ø—Ä–∞–≤–ª–µ–Ω–æ/–≤—Å–µ–≥–æ/–æ—à–∏–±–∫–∏)

# crm2/handlers/admin/panel.py
# –ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ: –ì–ª–∞–≤–Ω–æ–µ –º–µ–Ω—é –∞–¥–º–∏–Ω-–ø–∞–Ω–µ–ª–∏ —Å –Ω–∞–≤–∏–≥–∞—Ü–∏–µ–π –ø–æ —Ä–∞–∑–¥–µ–ª–∞–º
# –§—É–Ω–∫—Ü–∏–∏:
# - _admin_kb - –°–æ–∑–¥–∞–Ω–∏–µ –∫–ª–∞–≤–∏–∞—Ç—É—Ä—ã –≥–ª–∞–≤–Ω–æ–≥–æ –º–µ–Ω—é –∞–¥–º–∏–Ω-–ø–∞–Ω–µ–ª–∏
# - open_admin_menu - –û—Ç–∫—Ä—ã—Ç–∏–µ –≥–ª–∞–≤–Ω–æ–≥–æ –º–µ–Ω—é –∞–¥–º–∏–Ω-–ø–∞–Ω–µ–ª–∏
# - back_to_main - –í–æ–∑–≤—Ä–∞—Ç –≤ –≥–ª–∞–≤–Ω–æ–µ –º–µ–Ω—é –±–æ—Ç–∞
# –û–±—Ä–∞–±–æ—Ç—á–∏–∫–∏:
# - handle_admin_button - –û–±—Ä–∞–±–æ—Ç—á–∏–∫ –∫–Ω–æ–ø–∫–∏ "‚öôÔ∏è –ê–¥–º–∏–Ω" –∏–∑ –≥–ª–∞–≤–Ω–æ–≥–æ –º–µ–Ω—é
# - cmd_admin - –û–±—Ä–∞–±–æ—Ç—á–∏–∫ –∫–æ–º–∞–Ω–¥—ã /admin
# - go_homework - –ü–µ—Ä–µ—Ö–æ–¥ –≤ —Ä–∞–∑–¥–µ–ª –¥–æ–º–∞—à–Ω–∏—Ö –∑–∞–¥–∞–Ω–∏–π
# - go_schedule - –ü–µ—Ä–µ—Ö–æ–¥ –≤ —Ä–∞–∑–¥–µ–ª —Ä–∞—Å–ø–∏—Å–∞–Ω–∏—è (–∑–∞–≥–ª—É—à–∫–∞)
# - go_users - –ü–µ—Ä–µ—Ö–æ–¥ –≤ —Ä–∞–∑–¥–µ–ª –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π (–∑–∞–≥–ª—É—à–∫–∞)
# - go_db - –ü–µ—Ä–µ—Ö–æ–¥ –≤ —Ä–∞–∑–¥–µ–ª –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö (–∑–∞–≥–ª—É—à–∫–∞)

# crm2/handlers/admin/schedule.py
# –ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ: –û–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ –¥–ª—è –ø—Ä–æ—Å–º–æ—Ç—Ä–∞ —Ä–∞—Å–ø–∏—Å–∞–Ω–∏—è –≤ –∞–¥–º–∏–Ω-–ø–∞–Ω–µ–ª–∏ (—Ç—Ä–µ–Ω–∏–Ω–≥–∏, –º–µ—Ä–æ–ø—Ä–∏—è—Ç–∏—è, —Ü–µ–ª–∏—Ç–µ–ª—å—Å–∫–∏–µ –ø—Ä–∏–µ–º—ã)
# –§—É–Ω–∫—Ü–∏–∏:
# - schedule_menu - –í—Ö–æ–¥–Ω–æ–µ –º–µ–Ω—é —Ä–∞–∑–¥–µ–ª–∞ —Ä–∞—Å–ø–∏—Å–∞–Ω–∏—è
# - _render_menu - –û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ –º–µ–Ω—é —Ä–∞—Å–ø–∏—Å–∞–Ω–∏—è
# - trainings_entry - –í—Ö–æ–¥ –≤ —Ä–∞–∑–¥–µ–ª —Ç—Ä–µ–Ω–∏–Ω–≥–æ–≤
# - trainings_cohort - –í—ã–±–æ—Ä –∫–æ–≥–æ—Ä—Ç—ã –¥–ª—è –ø—Ä–æ—Å–º–æ—Ç—Ä–∞ —Ç—Ä–µ–Ω–∏–Ω–≥–æ–≤
# - trainings_page - –ü–∞–≥–∏–Ω–∞—Ü–∏—è —Å–ø–∏—Å–∫–∞ —Ç—Ä–µ–Ω–∏–Ω–≥–æ–≤
# - _render_trainings - –û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ —Å–ø–∏—Å–∫–∞ —Ç—Ä–µ–Ω–∏–Ω–≥–æ–≤ —Å –ø–∞–≥–∏–Ω–∞—Ü–∏–µ–π
# - events_entry - –í—Ö–æ–¥ –≤ —Ä–∞–∑–¥–µ–ª –º–µ—Ä–æ–ø—Ä–∏—è—Ç–∏–π
# - events_page - –ü–∞–≥–∏–Ω–∞—Ü–∏—è —Å–ø–∏—Å–∫–∞ –º–µ—Ä–æ–ø—Ä–∏—è—Ç–∏–π
# - _render_events - –û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ —Å–ø–∏—Å–∫–∞ –º–µ—Ä–æ–ø—Ä–∏—è—Ç–∏–π —Å –ø–∞–≥–∏–Ω–∞—Ü–∏–µ–π
# - healings_entry - –í—Ö–æ–¥ –≤ —Ä–∞–∑–¥–µ–ª —Ü–µ–ª–∏—Ç–µ–ª—å—Å–∫–∏—Ö –ø—Ä–∏–µ–º–æ–≤
# - healings_page - –ü–∞–≥–∏–Ω–∞—Ü–∏—è —Å–ø–∏—Å–∫–∞ —Ü–µ–ª–∏—Ç–µ–ª—å—Å–∫–∏—Ö –ø—Ä–∏–µ–º–æ–≤
# - _render_healings - –û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ —Å–ø–∏—Å–∫–∞ —Ü–µ–ª–∏—Ç–µ–ª—å—Å–∫–∏—Ö –ø—Ä–∏–µ–º–æ–≤ —Å –ø–∞–≥–∏–Ω–∞—Ü–∏–µ–π
# - all_entry - –í—Ö–æ–¥ –≤ –æ–±—â–µ–µ —Ä–∞—Å–ø–∏—Å–∞–Ω–∏–µ
# - all_page - –ü–∞–≥–∏–Ω–∞—Ü–∏—è –æ–±—â–µ–≥–æ —Ä–∞—Å–ø–∏—Å–∞–Ω–∏—è
# - _render_all - –û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ –æ–±—â–µ–≥–æ —Ä–∞—Å–ø–∏—Å–∞–Ω–∏—è —Å –ø–∞–≥–∏–Ω–∞—Ü–∏–µ–π

# crm2/handlers/about.py
# –ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ: –û–±—Ä–∞–±–æ—Ç—á–∏–∫ –∫–æ–º–∞–Ω–¥—ã /about - –ø–æ—ç—Ç–∏—á–µ—Å–∫–∞—è –≤–∏–∑–∏—Ç–∫–∞ –ø—Ä–æ–µ–∫—Ç–∞ Psytech
# –§—É–Ω–∫—Ü–∏–∏:
# - cmd_about - –û—Ç–ø—Ä–∞–≤–∫–∞ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –æ –ø—Ä–æ–µ–∫—Ç–µ Psytech (—Ñ–∏–ª–æ—Å–æ—Ñ–∏—è, —Ü–µ–ª–∏, –º–∏—Å—Å–∏—è)

# crm2/handlers/admin_db.py
# –ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ: –ê–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–∏–≤–Ω—ã–µ –∫–æ–º–∞–Ω–¥—ã –¥–ª—è –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∏ –∏ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö
# –§—É–Ω–∫—Ü–∏–∏:
# - db_sessions_info - –î–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞ —Ç–∞–±–ª–∏—Ü—ã sessions (—Å—Ç—Ä—É–∫—Ç—É—Ä–∞, —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞)
# - db_fix_cohort - –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Å—Ç—Ä—É–∫—Ç—É—Ä—ã —Ç–∞–±–ª–∏—Ü—ã sessions (–¥–æ–±–∞–≤–ª–µ–Ω–∏–µ cohort_id, –º–∏–≥—Ä–∞—Ü–∏—è –¥–∞–Ω–Ω—ã—Ö)

# crm2/handlers/admin/streams_fix.py
# –ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ: –£—Ç–∏–ª–∏—Ç–∞ –¥–ª—è –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è –ø—Ä–∏–≤—è–∑–∫–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π –∫ –ø–æ—Ç–æ–∫–∞–º (—É—Å—Ç–∞—Ä–µ–≤—à–∞—è - –∏—Å–ø–æ–ª—å–∑—É–µ—Ç —Ç–∞–±–ª–∏—Ü—É participants)
# –§—É–Ω–∫—Ü–∏–∏:
# - _is_admin - –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø—Ä–∞–≤ –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞
# - _assign_kb - –°–æ–∑–¥–∞–Ω–∏–µ –∫–ª–∞–≤–∏–∞—Ç—É—Ä—ã –¥–ª—è –Ω–∞–∑–Ω–∞—á–µ–Ω–∏—è –ø–æ—Ç–æ–∫–∞
# –û–±—Ä–∞–±–æ—Ç—á–∏–∫–∏:
# - show_missing_streams - –ü–æ–∫–∞–∑ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π –±–µ–∑ –ø—Ä–∏–≤—è–∑–∫–∏ –∫ –ø–æ—Ç–æ–∫—É
# - admin_set_stream - –ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ –ø–æ—Ç–æ–∫–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é

# crm2/handlers/admin/users.py
# –ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ: –ü—Ä–æ—Å–º–æ—Ç—Ä –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π —Å —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏–µ–π –ø–æ –≥—Ä—É–ø–ø–∞–º –∏ –ø–∞–≥–∏–Ω–∞—Ü–∏–µ–π
# –§—É–Ω–∫—Ü–∏–∏:
# - admin_users_entry - –í—Ö–æ–¥ –≤ —Ä–∞–∑–¥–µ–ª –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
# - admin_users_groups - –ü–æ–∫–∞–∑ –º–µ–Ω—é –≥—Ä—É–ø–ø –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
# - _group_human - –ü—Ä–µ–æ–±—Ä–∞–∑–æ–≤–∞–Ω–∏–µ –∫–ª—é—á–∞ –≥—Ä—É–ø–ø—ã –≤ —á–∏—Ç–∞–µ–º–æ–µ –Ω–∞–∑–≤–∞–Ω–∏–µ
# - _user_line - –§–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ —Å—Ç—Ä–æ–∫–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –¥–ª—è –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è
# - _show_group_page - –û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ —Å—Ç—Ä–∞–Ω–∏—Ü—ã —Å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º–∏ –≥—Ä—É–ø–ø—ã
# - admin_users_pick_group - –û–±—Ä–∞–±–æ—Ç–∫–∞ –≤—ã–±–æ—Ä–∞ –≥—Ä—É–ø–ø—ã
# - admin_users_page - –û–±—Ä–∞–±–æ—Ç–∫–∞ –ø–∞–≥–∏–Ω–∞—Ü–∏–∏
# - admin_back - –í–æ–∑–≤—Ä–∞—Ç –≤ –∞–¥–º–∏–Ω-–ø–∞–Ω–µ–ª—å

# crm2/handlers/admin_db_doctor.py
# –ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ: –ú–∏–Ω–∏-–ø–∞–Ω–µ–ª—å –¥–ª—è –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∏ –∏ —Ä–µ–º–æ–Ω—Ç–∞ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö (—Ç–æ–ª—å–∫–æ –¥–ª—è –∞–¥–º–∏–Ω–æ–≤)
# –§—É–Ω–∫—Ü–∏–∏:
# - show_menu - –ü–æ–∫–∞–∑ –º–µ–Ω—é DB Doctor —Å –∫–Ω–æ–ø–∫–∞–º–∏ –¥–µ–π—Å—Ç–≤–∏–π
# - action_sessions_info - –ü–æ–∫–∞–∑ —Å—Ç—Ä—É–∫—Ç—É—Ä—ã —Ç–∞–±–ª–∏—Ü—ã sessions
# - action_fix_sessions - –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Å—Ç—Ä—É–∫—Ç—É—Ä—ã —Ç–∞–±–ª–∏—Ü—ã sessions (–¥–æ–±–∞–≤–ª–µ–Ω–∏–µ cohort_id)
# - action_indexes - –ü–æ–∫–∞–∑ –∏–Ω–¥–µ–∫—Å–æ–≤ —Ç–∞–±–ª–∏—Ü—ã sessions
# - action_become_guest - –£–¥–∞–ª–µ–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –∏–∑ –±–∞–∑—ã (—Å—Ç–∞—Ç—å –≥–æ—Å—Ç–µ–º)
# - action_become_user2 - –ò–∑–º–µ–Ω–µ–Ω–∏–µ —Ä–æ–ª–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –Ω–∞ user —Å –∫–æ–≥–æ—Ä—Ç–æ–π 2
# - back_to_main - –í–æ–∑–≤—Ä–∞—Ç –≤ –≥–ª–∞–≤–Ω–æ–µ –º–µ–Ω—é

# crm2/handlers/admin_users.py
# –ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ: –û–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ –ø–æ–¥–º–µ–Ω—é "–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏" –≤ –∞–¥–º–∏–Ω-–ø–∞–Ω–µ–ª–∏ —Å —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏–µ–π –ø–æ –≥—Ä—É–ø–ø–∞–º
# –§—É–Ω–∫—Ü–∏–∏:
# - admin_users_entry - –í—Ö–æ–¥–Ω–∞—è —Ç–æ—á–∫–∞ —Ä–∞–∑–¥–µ–ª–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
# - admin_users_pick_group - –û–±—Ä–∞–±–æ—Ç–∫–∞ –≤—ã–±–æ—Ä–∞ –≥—Ä—É–ø–ø—ã –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
# –û–±—Ä–∞–±–æ—Ç—á–∏–∫–∏:
# - admin_users_entry - –ü–æ–∫–∞–∑ –º–µ–Ω—é –≥—Ä—É–ø–ø –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π (–∫–æ–≥–æ—Ä—Ç—ã, –Ω–æ–≤—ã–µ, –≤—ã–ø—É—Å–∫–Ω–∏–∫–∏, –∞–¥–º–∏–Ω—ã)
# - admin_users_pick_group - –ü–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ –≤—ã–±–æ—Ä–∞ –≥—Ä—É–ø–ø—ã (–∑–∞–≥–ª—É—à–∫–∞ –¥–ª—è –±—É–¥—É—â–µ–π –ø–∞–≥–∏–Ω–∞—Ü–∏–∏)

# crm2/handlers/admin_homework.py  
# –ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ: –ü–æ–ª–Ω—ã–π —Ü–∏–∫–ª —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –¥–æ–º–∞—à–Ω–∏–º–∏ –∑–∞–¥–∞–Ω–∏—è–º–∏ - –æ—Ç –≤—ã–±–æ—Ä–∞ —Å–µ—Å—Å–∏–∏ –¥–æ –º–∞—Å—Å–æ–≤–æ–π —Ä–∞—Å—Å—ã–ª–∫–∏
# –ö–ª–∞—Å—Å—ã:
# - HW - FSM —Å–æ—Å—Ç–æ—è–Ω–∏—è –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å –î–ó (awaiting_link, chosen_session)
# –§—É–Ω–∫—Ü–∏–∏:
# - _kb - –£—Ç–∏–ª–∏—Ç–∞ —Å–æ–∑–¥–∞–Ω–∏—è –∫–ª–∞–≤–∏–∞—Ç—É—Ä—ã –∏–∑ –∫–Ω–æ–ø–æ–∫
# - homework_menu_markup - –ì–ª–∞–≤–Ω–æ–µ –º–µ–Ω—é —Ä–∞–∑–¥–µ–ª–∞ –î–ó
# - _sessions_list_kb - –ö–ª–∞–≤–∏–∞—Ç—É—Ä–∞ —Å–ø–∏—Å–∫–∞ –±–ª–∏–∂–∞–π—à–∏—Ö —Å–µ—Å—Å–∏–π
# - _session_actions_kb - –ö–ª–∞–≤–∏–∞—Ç—É—Ä–∞ –¥–µ–π—Å—Ç–≤–∏–π –¥–ª—è –≤—ã–±—Ä–∞–Ω–Ω–æ–π —Å–µ—Å—Å–∏–∏
# –û–±—Ä–∞–±–æ—Ç—á–∏–∫–∏:
# - admin_homework_entry - –í—Ö–æ–¥ –≤ —Ä–∞–∑–¥–µ–ª –î–ó –∏–∑ –∞–¥–º–∏–Ω-–ø–∞–Ω–µ–ª–∏
# - cb_hw_menu - –í–æ–∑–≤—Ä–∞—Ç –≤ –º–µ–Ω—é –î–ó
# - cb_hw_list - –ü–æ–∫–∞–∑ —Å–ø–∏—Å–∫–∞ —Å–µ—Å—Å–∏–π –∑–∞ 14 –¥–Ω–µ–π
# - cb_hw_session - –û–±—Ä–∞–±–æ—Ç–∫–∞ –≤—ã–±–æ—Ä–∞ –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–π —Å–µ—Å—Å–∏–∏
# - cb_hw_send_ask_link - –ó–∞–ø—Ä–æ—Å —Å—Å—ã–ª–æ–∫ –¥–ª—è —Ä–∞—Å—Å—ã–ª–∫–∏ –î–ó
# - hw_got_links - –ú–∞—Å—Å–æ–≤–∞—è —Ä–∞—Å—Å—ã–ª–∫–∞ –î–ó –ø—Ä–∏—Å—É—Ç—Å—Ç–≤–æ–≤–∞–≤—à–∏–º –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º
# - cb_hw_status_ask/cb_hw_status - –ü—Ä–æ—Å–º–æ—Ç—Ä —Å—Ç–∞—Ç—É—Å–∞ –¥–æ—Å—Ç–∞–≤–∫–∏ –î–ó
# - cb_hw_reset_info - –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ —Å–±—Ä–æ—Å–µ –æ—Ç–º–µ—Ç–æ–∫ (–∑–∞–≥–ª—É—à–∫–∞)

# crm2/handlers/auth.py
# –ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ: –ü–æ–ª–Ω–æ—Ü–µ–Ω–Ω–∞—è —Å–∏—Å—Ç–µ–º–∞ –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏ —Å FSM –∏ –±–µ–∑–æ–ø–∞—Å–Ω–æ–π –ø—Ä–æ–≤–µ—Ä–∫–æ–π –ø–∞—Ä–æ–ª–µ–π
# –ö–ª–∞—Å—Å—ã:
# - LoginSG - FSM —Å–æ—Å—Ç–æ—è–Ω–∏—è –ø—Ä–æ—Ü–µ—Å—Å–∞ –≤—Ö–æ–¥–∞ (nickname, password)
# –§—É–Ω–∫—Ü–∏–∏:
# - _normalize - –ù–æ—Ä–º–∞–ª–∏–∑–∞—Ü–∏—è —Å—Ç—Ä–æ–∫ (—É–¥–∞–ª–µ–Ω–∏–µ –Ω–µ–≤–∏–¥–∏–º—ã—Ö —Å–∏–º–≤–æ–ª–æ–≤)
# - _is_bcrypt - –û–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ —Ñ–æ—Ä–º–∞—Ç–∞ —Ö–µ—à–∞ –ø–∞—Ä–æ–ª—è
# - _check_password - –ë–µ–∑–æ–ø–∞—Å–Ω–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞ –ø–∞—Ä–æ–ª—è (bcrypt + hmac)
# - _human_name - –ü–æ–ª—É—á–µ–Ω–∏–µ —á–∏—Ç–∞–µ–º–æ–≥–æ –∏–º–µ–Ω–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
# - _user_role - –û–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ —Ä–æ–ª–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
# - _bind_telegram_id - –ü—Ä–∏–≤—è–∑–∫–∞ Telegram ID –∫ —É—á–µ—Ç–Ω–æ–π –∑–∞–ø–∏—Å–∏
# - _fetch_user_by_credentials - –ü–æ–∏—Å–∫ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –ø–æ –ª–æ–≥–∏–Ω—É/–ø–∞—Ä–æ–ª—é
# - _show_role_keyboard - –ü–æ–∫–∞–∑ –º–µ–Ω—é –ø–æ —Ä–æ–ª–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
# –û–±—Ä–∞–±–æ—Ç—á–∏–∫–∏:
# - login_handler - –ó–∞–ø—É—Å–∫ –ø—Ä–æ—Ü–µ—Å—Å–∞ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏ –ø–æ –∫–Ω–æ–ø–∫–µ
# - cmd_login - –ó–∞–ø—É—Å–∫ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏ –ø–æ –∫–æ–º–∞–Ω–¥–µ /login
# - login_nickname - –û–±—Ä–∞–±–æ—Ç–∫–∞ –≤–≤–æ–¥–∞ –Ω–∏–∫–Ω–µ–π–º–∞ (FSM)
# - login_password - –û–±—Ä–∞–±–æ—Ç–∫–∞ –≤–≤–æ–¥–∞ –ø–∞—Ä–æ–ª—è –∏ –∑–∞–≤–µ—Ä—à–µ–Ω–∏–µ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏ (FSM)
# - login_from_inline - –ó–∞–ø—É—Å–∫ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏ –∏–∑ inline-–∫–Ω–æ–ø–∫–∏

# crm2/handlers/consent.py
# –ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ: –ú–∏–Ω–∏–º–∞–ª–∏—Å—Ç–∏—á–Ω—ã–π –æ–±—Ä–∞–±–æ—Ç—á–∏–∫ –ø–æ–ª—É—á–µ–Ω–∏—è —Å–æ–≥–ª–∞—Å–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
# –§—É–Ω–∫—Ü–∏–∏: ‚Äî
# –û–±—Ä–∞–±–æ—Ç—á–∏–∫–∏:
# - accept_consent - –§–∏–∫—Å–∞—Ü–∏—è —Å–æ–≥–ª–∞—Å–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è (—Å—Ç–∞—Ç–∏—á–µ—Å–∫–∏–π –æ—Ç–≤–µ—Ç)

# crm2/handlers/guest_menu.py
# –ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ: –ù–∞–≤–∏–≥–∞—Ü–∏–æ–Ω–Ω–æ–µ –º–µ–Ω—é –¥–ª—è –Ω–µ–∞–≤—Ç–æ—Ä–∏–∑–æ–≤–∞–Ω–Ω—ã—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π —Å —Ç–æ—á–∫–∞–º–∏ –≤—Ö–æ–¥–∞ –≤ —Å–∏—Å—Ç–µ–º—É
# –§—É–Ω–∫—Ü–∏–∏: ‚Äî
# –û–±—Ä–∞–±–æ—Ç—á–∏–∫–∏:
# - guest_login - –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å—É—â–µ—Å—Ç–≤–æ–≤–∞–Ω–∏—è —É—á–µ—Ç–Ω–æ–π –∑–∞–ø–∏—Å–∏ –∏ –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏–µ –≤—Ö–æ–¥–∞
# - guest_register - –ü–µ—Ä–µ–Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –≤ –º–æ–¥—É–ª—å —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏ –∏–ª–∏ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ –æ —Å—É—â–µ—Å—Ç–≤—É—é—â–µ–º –∞–∫–∫–∞—É–Ω—Ç–µ
# - guest_about - –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ –ø—Ä–æ–µ–∫—Ç–µ Psytech CRM
# - back_to_guest_menu - –í–æ–∑–≤—Ä–∞—Ç –≤ –≥–ª–∞–≤–Ω–æ–µ –≥–æ—Å—Ç–µ–≤–æ–µ –º–µ–Ω—é

# crm2/handlers/help.py
# –ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ: –û–±—Ä–∞–±–æ—Ç—á–∏–∫ —Å–ø—Ä–∞–≤–∫–∏ –ø–æ —Å–∏—Å—Ç–µ–º–µ —Å –æ–ø–∏—Å–∞–Ω–∏–µ–º –≤—Å–µ—Ö –¥–æ—Å—Ç—É–ø–Ω—ã—Ö —Ñ—É–Ω–∫—Ü–∏–π –±–æ—Ç–∞
# –§—É–Ω–∫—Ü–∏–∏:
# - cmd_help - –û—Ç–ø—Ä–∞–≤–∫–∞ —Å—Ç—Ä—É–∫—Ç—É—Ä–∏—Ä–æ–≤–∞–Ω–Ω–æ–π —Å–ø—Ä–∞–≤–∫–∏ –ø–æ –∫–æ–º–∞–Ω–¥–µ /help
# –û–±—Ä–∞–±–æ—Ç—á–∏–∫–∏:
# - cmd_help - –û—Å–Ω–æ–≤–Ω–æ–π –æ–±—Ä–∞–±–æ—Ç—á–∏–∫ –∫–æ–º–∞–Ω–¥—ã /help —Å Markdown-—Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ–º

# crm2/handlers/info.py
# –ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ: –ú–Ω–æ–≥–æ—Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω—ã–π –º–æ–¥—É–ª—å –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ - —Ä–∞—Å–ø–∏—Å–∞–Ω–∏–µ, –ò–ò-–∞–≥–µ–Ω—Ç—ã, –ø—Ä–æ–µ–∫—Ç –∏ –æ–±—â–∞—è –Ω–∞–≤–∏–≥–∞—Ü–∏—è
# –§—É–Ω–∫—Ü–∏–∏:
# - _get - –£–Ω–∏–≤–µ—Ä—Å–∞–ª—å–Ω—ã–π –¥–æ—Å—Ç—É–ø –∫ –ø–æ–ª—è–º –æ–±—ä–µ–∫—Ç–æ–≤ –∏ —Å–ª–æ–≤–∞—Ä–µ–π
# - _code - –ò–∑–≤–ª–µ—á–µ–Ω–∏–µ –∫–æ–¥–∞ –∑–∞–Ω—è—Ç–∏—è –∏–∑ —Ä–∞–∑–ª–∏—á–Ω—ã—Ö –ø–æ–ª–µ–π
# - _fmt_date - –§–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –¥–∞—Ç—ã –≤ —á–∏—Ç–∞–µ–º—ã–π –≤–∏–¥
# - _build_details_kb - –ü–æ—Å—Ç—Ä–æ–µ–Ω–∏–µ –∫–ª–∞–≤–∏–∞—Ç—É—Ä—ã –¥–µ—Ç–∞–ª–µ–π —Å–µ—Å—Å–∏–π
# - _show_schedule_list - –í—Å–ø–æ–º–æ–≥–∞—Ç–µ–ª—å–Ω—ã–π –ø–æ–∫–∞–∑ —Å–ø–∏—Å–∫–∞ —Ä–∞—Å–ø–∏—Å–∞–Ω–∏—è
# –û–±—Ä–∞–±–æ—Ç—á–∏–∫–∏:
# - show_schedule_menu - –ì–ª–∞–≤–Ω–æ–µ –º–µ–Ω—é —Ä–∞—Å–ø–∏—Å–∞–Ω–∏—è
# - session_details - –î–µ—Ç–∞–ª—å–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ –≤—ã–±—Ä–∞–Ω–Ω–æ–π —Å–µ—Å—Å–∏–∏
# - show_agents - –ú–µ–Ω—é –ò–ò-–∞–≥–µ–Ω—Ç–æ–≤
# - open_meditation - –°—Å—ã–ª–∫–∞ –Ω–∞ –∞–≥–µ–Ω—Ç–∞ "–í–æ–ª–µ–≤–∞—è –º–µ–¥–∏—Ç–∞—Ü–∏—è"
# - open_harmony - –°—Å—ã–ª–∫–∞ –Ω–∞ –∞–≥–µ–Ω—Ç–∞ "–ü—Å–∏—Ö–æ—Ç–µ—Ö–Ω–æ–ª–æ–≥–∏–∏ –≥–∞—Ä–º–æ–Ω–∏–∏"
# - open_agents_instruction - –ü–æ–¥—Ä–æ–±–Ω–∞—è –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—è –ø–æ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—é ChatGPT
# - show_project_menu - –ú–µ–Ω—é –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –æ –ø—Ä–æ–µ–∫—Ç–µ
# - how_sessions_go - –£—Å—Ç–∞—Ä–µ–≤—à–∏–π –æ–±—Ä–∞–±–æ—Ç—á–∏–∫ (—Ä–µ–¥–∏—Ä–µ–∫—Ç –Ω–∞ –ø—Ä–æ–µ–∫—Ç)
# - back_to_main_from_project - –í–æ–∑–≤—Ä–∞—Ç –≤ –≥–ª–∞–≤–Ω–æ–µ –º–µ–Ω—é —Å —É—á–µ—Ç–æ–º —Ä–æ–ª–∏
# - on_events - –û–±—Ä–∞–±–æ—Ç—á–∏–∫ –º–µ—Ä–æ–ø—Ä–∏—è—Ç–∏–π (–∑–∞–≥–ª—É—à–∫–∞)
# - on_all - –ü–æ–∫–∞–∑ –æ–±—â–µ–≥–æ —Ä–∞—Å–ø–∏—Å–∞–Ω–∏—è –≤—Å–µ—Ö —Å–æ–±—ã—Ç–∏–π
# - on_cohort - –ù–∞–≤–∏–≥–∞—Ü–∏—è –ø–æ —Ä–∞—Å–ø–∏—Å–∞–Ω–∏—é –∫–æ–≥–æ—Ä—Ç —Å –ø–∞–≥–∏–Ω–∞—Ü–∏–µ–π –¥–∞—Ç
# - on_info_mode - –ü–æ–∫–∞–∑ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –æ —Ä–µ–∂–∏–º–µ –ø—Ä–æ–µ–∫—Ç–∞
# - on_info_meanings - –°—Å—ã–ª–∫–∞ –Ω–∞ —Å–º—ã—Å–ª—ã –ø—Ä–æ–µ–∫—Ç–∞ (–≤–Ω–µ—à–Ω–∏–π —Ä–µ—Å—É—Ä—Å)
# - on_info_mainmenu - –í–æ–∑–≤—Ä–∞—Ç –≤ –º–µ–Ω—é –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –æ –ø—Ä–æ–µ–∫—Ç–µ

# crm2/handlers/main_menu.py
# –ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ: –¶–µ–Ω—Ç—Ä–∞–ª—å–Ω–∞—è –Ω–∞–≤–∏–≥–∞—Ü–∏—è —Å–∏—Å—Ç–µ–º—ã - –æ–±—Ä–∞–±–æ—Ç–∫–∞ –≥–ª–∞–≤–Ω–æ–≥–æ –º–µ–Ω—é –¥–ª—è –≤—Å–µ—Ö —Ä–æ–ª–µ–π –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
# –§—É–Ω–∫—Ü–∏–∏: ‚Äî
# –û–±—Ä–∞–±–æ—Ç—á–∏–∫–∏:
# - to_main_menu - –ü–µ—Ä–µ—Ö–æ–¥ –≤ –≥–ª–∞–≤–Ω–æ–µ –º–µ–Ω—é –ø–æ—Å–ª–µ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏ —Å –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ–º —Ä–æ–ª–∏
# - back_to_main - –£–Ω–∏–≤–µ—Ä—Å–∞–ª—å–Ω—ã–π –≤–æ–∑–≤—Ä–∞—Ç –≤ –≥–ª–∞–≤–Ω–æ–µ –º–µ–Ω—é (–≥–æ—Å—Ç—å/–ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å/–∞–¥–º–∏–Ω)
# - handle_admin_button - –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø—Ä–∞–≤ –∏ –ø–µ—Ä–µ–Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –≤ –∞–¥–º–∏–Ω-–ø–∞–Ω–µ–ª—å
# - show_schedule - –û–±—Ä–∞–±–æ—Ç—á–∏–∫ —Ä–∞–∑–¥–µ–ª–∞ —Ä–∞—Å–ø–∏—Å–∞–Ω–∏—è (—Ç–æ–ª—å–∫–æ –∞–≤—Ç–æ—Ä–∏–∑–æ–≤–∞–Ω–Ω—ã–µ)
# - show_materials - –û–±—Ä–∞–±–æ—Ç—á–∏–∫ —Ä–∞–∑–¥–µ–ª–∞ –º–∞—Ç–µ—Ä–∏–∞–ª–æ–≤ (—Ç–æ–ª—å–∫–æ –∞–≤—Ç–æ—Ä–∏–∑–æ–≤–∞–Ω–Ω—ã–µ)
# - show_profile - –û–±—Ä–∞–±–æ—Ç—á–∏–∫ –ª–∏—á–Ω–æ–≥–æ –∫–∞–±–∏–Ω–µ—Ç–∞ (—Ç–æ–ª—å–∫–æ –∞–≤—Ç–æ—Ä–∏–∑–æ–≤–∞–Ω–Ω—ã–µ)

# crm2/handlers/profile.py
# –ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ: –õ–∏—á–Ω—ã–π –∫–∞–±–∏–Ω–µ—Ç –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è —Å –Ω–∞—Å—Ç—Ä–æ–π–∫–∞–º–∏ –ø—Ä–æ—Ñ–∏–ª—è –∏ —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ–º –ø–æ—Ç–æ–∫–æ–º
# –§—É–Ω–∫—Ü–∏–∏:
# - _extract_ids - –£–Ω–∏–≤–µ—Ä—Å–∞–ª—å–Ω–æ–µ –∏–∑–≤–ª–µ—á–µ–Ω–∏–µ chat_id –∏ user_id –∏–∑ Message/CallbackQuery
# - _profile_kb - –°–æ–∑–¥–∞–Ω–∏–µ –∫–ª–∞–≤–∏–∞—Ç—É—Ä—ã –ª–∏—á–Ω–æ–≥–æ –∫–∞–±–∏–Ω–µ—Ç–∞
# - show_profile - –£–Ω–∏–≤–µ—Ä—Å–∞–ª—å–Ω—ã–π –ø–æ–∫–∞–∑ –ø—Ä–æ—Ñ–∏–ª—è (–ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç Message –∏ CallbackQuery)
# –û–±—Ä–∞–±–æ—Ç—á–∏–∫–∏:
# - profile_entry - –í—Ö–æ–¥ –≤ –ª–∏—á–Ω—ã–π –∫–∞–±–∏–Ω–µ—Ç –ø–æ –∫–Ω–æ–ø–∫–µ
# - ask_stream - –ò–Ω—Ç–µ—Ä—Ñ–µ–π—Å –≤—ã–±–æ—Ä–∞ —É—á–µ–±–Ω–æ–≥–æ –ø–æ—Ç–æ–∫–∞
# - set_stream_cb - –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –≤—ã–±—Ä–∞–Ω–Ω–æ–≥–æ –ø–æ—Ç–æ–∫–∞ –≤ –ë–î
# - profile_back - –í–æ–∑–≤—Ä–∞—Ç –≤ –∫–∞—Ä—Ç–æ—á–∫—É –ø—Ä–æ—Ñ–∏–ª—è
# - profile_back_main - –í–æ–∑–≤—Ä–∞—Ç –≤ –≥–ª–∞–≤–Ω–æ–µ –º–µ–Ω—é —Å —É–¥–∞–ª–µ–Ω–∏–µ–º —Å–æ–æ–±—â–µ–Ω–∏—è
# - toggle_notify - –ü–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–µ –Ω–∞—Å—Ç—Ä–æ–µ–∫ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π

# crm2/handlers/registration.py
# –ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ: –ü–æ–ª–Ω—ã–π —Ü–∏–∫–ª —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏ –∏ —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏—è –ø—Ä–æ—Ñ–∏–ª—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è —Å FSM
# –ö–ª–∞—Å—Å—ã:
# - EditField - FSM —Å–æ—Å—Ç–æ—è–Ω–∏—è –¥–ª—è —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏—è –ø–æ–ª–µ–π –ø—Ä–æ—Ñ–∏–ª—è (nickname, password, full_name, phone, email)
# –§—É–Ω–∫—Ü–∏–∏:
# - _edit_kb - –ö–ª–∞–≤–∏–∞—Ç—É—Ä–∞ –≤—ã–±–æ—Ä–∞ –ø–æ–ª—è –¥–ª—è —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏—è
# - _cohort_inline_kb - –ò–Ω–ª–∞–π–Ω-–∫–ª–∞–≤–∏–∞—Ç—É—Ä–∞ –≤—ã–±–æ—Ä–∞ –ø–æ—Ç–æ–∫–∞ —Å –≤–∏–∑—É–∞–ª–∏–∑–∞—Ü–∏–µ–π —Ç–µ–∫—É—â–µ–≥–æ
# - _user_card - –§–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –∫–∞—Ä—Ç–æ—á–∫–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –¥–ª—è –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è
# –û–±—Ä–∞–±–æ—Ç—á–∏–∫–∏:
# - show_fix_card_cmd - –°—Ç–∞—Ä—Ç —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏—è –ø–æ –∫–æ–º–∞–Ω–¥–µ /fix
# - show_fix_card_text - –°—Ç–∞—Ä—Ç —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏—è –ø–æ —Ç–µ–∫—Å—Ç–æ–≤—ã–º –∫–æ–º–∞–Ω–¥–∞–º
# - edit_nickname/save_nickname - –†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –Ω–∏–∫–Ω–µ–π–º–∞ (FSM)
# - edit_password/save_password - –†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –ø–∞—Ä–æ–ª—è (FSM)
# - edit_full_name/save_full_name - –†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –§–ò–û (FSM)
# - edit_phone/save_phone - –†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ —Ç–µ–ª–µ—Ñ–æ–Ω–∞ (FSM)
# - edit_email/save_email - –†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ email (FSM)
# - choose_cohort - –í—ã–±–æ—Ä –ø–æ—Ç–æ–∫–∞ –æ–±—É—á–µ–Ω–∏—è
# - set_cohort_cb - –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –≤—ã–±—Ä–∞–Ω–Ω–æ–≥–æ –ø–æ—Ç–æ–∫–∞ —á–µ—Ä–µ–∑ callback
# - back_from_inline - –í–æ–∑–≤—Ä–∞—Ç –∏–∑ –∏–Ω–ª–∞–π–Ω-–º–µ–Ω—é

# crm2/handlers/start.py
# –ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ: –û–±—Ä–∞–±–æ—Ç—á–∏–∫ –∫–æ–º–∞–Ω–¥—ã /start - —Ç–æ—á–∫–∞ –≤—Ö–æ–¥–∞ –≤ —Å–∏—Å—Ç–µ–º—É –¥–ª—è –≤—Å–µ—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
# –§—É–Ω–∫—Ü–∏–∏:
# - _profile_complete - –ü—Ä–æ–≤–µ—Ä–∫–∞ –∑–∞–≤–µ—Ä—à–µ–Ω–Ω–æ—Å—Ç–∏ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
# –û–±—Ä–∞–±–æ—Ç—á–∏–∫–∏:
# - cmd_start - –û—Å–Ω–æ–≤–Ω–æ–π –æ–±—Ä–∞–±–æ—Ç—á–∏–∫ –∫–æ–º–∞–Ω–¥—ã /start, –≤—Å–µ–≥–¥–∞ –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç –≥–æ—Å—Ç–µ–≤–æ–µ –º–µ–Ω—é

# crm2/handlers/stream_selfset.py
# –ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ: –°–∞–º–æ—Å—Ç–æ—è—Ç–µ–ª—å–Ω–∞—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∞ —É—á–µ–±–Ω–æ–≥–æ –ø–æ—Ç–æ–∫–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–º
# –§—É–Ω–∫—Ü–∏–∏:
# - _streams_kb - –°–æ–∑–¥–∞–Ω–∏–µ –∫–ª–∞–≤–∏–∞—Ç—É—Ä—ã –≤—ã–±–æ—Ä–∞ –ø–æ—Ç–æ–∫–æ–≤
# –û–±—Ä–∞–±–æ—Ç—á–∏–∫–∏:
# - cmd_set_stream - –û–±—Ä–∞–±–æ—Ç—á–∏–∫ –∫–æ–º–∞–Ω–¥—ã /set_stream –∏ —Ç–µ–∫—Å—Ç–æ–≤–æ–π –∫–Ω–æ–ø–∫–∏
# - me_set_stream - –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –≤—ã–±—Ä–∞–Ω–Ω–æ–≥–æ –ø–æ—Ç–æ–∫–∞ –≤ –ë–î
# - open_set_stream_from_profile - –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å –ª–∏—á–Ω—ã–º –∫–∞–±–∏–Ω–µ—Ç–æ–º

# crm2/handlers/welcome.py
# –ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ: –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –ø—Ä–∏–≤–µ—Ç—Å—Ç–≤–∏–µ –Ω–æ–≤—ã—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π –ø—Ä–∏ –ø–µ—Ä–≤–æ–º /start
# –§—É–Ω–∫—Ü–∏–∏:
# - _user_exists - –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å—É—â–µ—Å—Ç–≤–æ–≤–∞–Ω–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –≤ –ë–î
# –û–±—Ä–∞–±–æ—Ç—á–∏–∫–∏:
# - greet_new_user - –ü–æ—ç—Ç–∏—á–µ—Å–∫–æ–µ –ø—Ä–∏–≤–µ—Ç—Å—Ç–≤–∏–µ –¥–ª—è –Ω–æ–≤—ã—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π

# crm2/keyboards/__init__.py
# –ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ: –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –ø–∞–∫–µ—Ç–∞ –∫–ª–∞–≤–∏–∞—Ç—É—Ä - —Ü–µ–Ω—Ç—Ä–∞–ª—å–Ω—ã–π —ç–∫—Å–ø–æ—Ä—Ç –≤—Å–µ—Ö –∫–ª–∞–≤–∏–∞—Ç—É—Ä —Å–∏—Å—Ç–µ–º—ã
# –≠–∫—Å–ø–æ—Ä—Ç–∏—Ä—É–µ—Ç:
# - guest_start_kb, role_kb, guest_kb - –±–∞–∑–æ–≤—ã–µ –∫–ª–∞–≤–∏–∞—Ç—É—Ä—ã
# - main_menu_kb - –≥–ª–∞–≤–Ω–æ–µ –º–µ–Ω—é
# - format_range, build_schedule_keyboard - —É—Ç–∏–ª–∏—Ç—ã —Ä–∞—Å–ø–∏—Å–∞–Ω–∏—è
# - info_menu_kb - –º–µ–Ω—é –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏
# - users_groups_kb, users_pager_kb - –∫–ª–∞–≤–∏–∞—Ç—É—Ä—ã –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
# - schedule_root_kb, schedule_dates_kb - –∫–ª–∞–≤–∏–∞—Ç—É—Ä—ã —Ä–∞—Å–ø–∏—Å–∞–Ω–∏—è
# - admin_panel_kb - –ø–∞–Ω–µ–ª—å –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞

# crm2/keyboards/_impl.py
# –ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ: –ë–∞–∑–æ–≤–∞—è —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è –æ—Å–Ω–æ–≤–Ω—ã—Ö –∫–ª–∞–≤–∏–∞—Ç—É—Ä —Å–∏—Å—Ç–µ–º—ã —Å –ø–æ–¥–¥–µ—Ä–∂–∫–æ–π —Ä–æ–ª–µ–≤–æ–π –º–æ–¥–µ–ª–∏
# –§—É–Ω–∫—Ü–∏–∏:
# - guest_kb - –ö–ª–∞–≤–∏–∞—Ç—É—Ä–∞ –¥–ª—è –≥–æ—Å—Ç–µ–π (–±–∞–∑–æ–≤–∞—è –≤–µ—Ä—Å–∏—è)
# - role_kb - –£–Ω–∏–≤–µ—Ä—Å–∞–ª—å–Ω–∞—è –∫–ª–∞–≤–∏–∞—Ç—É—Ä–∞ –ø–æ —Ä–æ–ª—è–º (user, advanced_user, admin)
# - guest_start_kb - –°—Ç–∞—Ä—Ç–æ–≤–æ–µ –º–µ–Ω—é –≥–æ—Å—Ç—è (–≤—Ö–æ–¥/—Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è/–æ –ø—Ä–æ–µ–∫—Ç–µ)

# crm2/keyboards/admin_attendance.py
# –ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ: –ö–ª–∞–≤–∏–∞—Ç—É—Ä—ã –¥–ª—è —Å–∏—Å—Ç–µ–º—ã —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –ø–æ—Å–µ—â–∞–µ–º–æ—Å—Ç—å—é –≤ –∞–¥–º–∏–Ω-–ø–∞–Ω–µ–ª–∏
# –§—É–Ω–∫—Ü–∏–∏:
# - _fmt - –§–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –¥–∞—Ç—ã –∏–∑ ISO –≤ —á–∏—Ç–∞–µ–º—ã–π –≤–∏–¥
# - attendance_root_kb - –ì–ª–∞–≤–Ω–æ–µ –º–µ–Ω—é –ø–æ—Å–µ—â–∞–µ–º–æ—Å—Ç–∏ (—Å–µ–≥–æ–¥–Ω—è—à–Ω–∏–µ –∏ –ø—Ä–æ—à–ª—ã–µ —Å–µ—Å—Å–∏–∏)
# - attendance_users_kb - –ö–ª–∞–≤–∏–∞—Ç—É—Ä–∞ —Å–ø–∏—Å–∫–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π —Å –∏–∫–æ–Ω–∫–∞–º–∏ —Å—Ç–∞—Ç—É—Å–æ–≤ –ø–æ—Å–µ—â–µ–Ω–∏—è

# crm2/keyboards/admin_panel.py
# –ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ: Reply-–∫–ª–∞–≤–∏–∞—Ç—É—Ä–∞ –∞–¥–º–∏–Ω-–ø–∞–Ω–µ–ª–∏ —Å –Ω–∞–≤–∏–≥–∞—Ü–∏–µ–π –ø–æ –≤—Å–µ–º —Ä–∞–∑–¥–µ–ª–∞–º
# –§—É–Ω–∫—Ü–∏–∏:
# - admin_panel_kb - –û—Å–Ω–æ–≤–Ω–∞—è –∫–ª–∞–≤–∏–∞—Ç—É—Ä–∞ –∞–¥–º–∏–Ω-–ø–∞–Ω–µ–ª–∏ —Å 8 —Ä–∞–∑–¥–µ–ª–∞–º–∏ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è

# crm2/keyboards/admin_schedule.py
# –ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ: Inline-–∫–ª–∞–≤–∏–∞—Ç—É—Ä—ã –¥–ª—è —Ä–∞–∑–¥–µ–ª–∞ —Ä–∞—Å–ø–∏—Å–∞–Ω–∏—è –≤ –∞–¥–º–∏–Ω-–ø–∞–Ω–µ–ª–∏
# –§—É–Ω–∫—Ü–∏–∏:
# - schedule_menu_kb - –ì–ª–∞–≤–Ω–æ–µ –º–µ–Ω—é —Ä–∞—Å–ø–∏—Å–∞–Ω–∏—è (–ø–æ—Ç–æ–∫–∏, –º–µ—Ä–æ–ø—Ä–∏—è—Ç–∏—è, –ø—Ä–∏–µ–º—ã, –æ–±—â–µ–µ)
# - schedule_cohorts_kb - –í—ã–±–æ—Ä –∫–æ–≥–æ—Ä—Ç—ã –¥–ª—è –ø—Ä–æ—Å–º–æ—Ç—Ä–∞ —Ç—Ä–µ–Ω–∏–Ω–≥–æ–≤
# - pager_kb - –£–Ω–∏–≤–µ—Ä—Å–∞–ª—å–Ω–∞—è –∫–ª–∞–≤–∏–∞—Ç—É—Ä–∞ –ø–∞–≥–∏–Ω–∞—Ü–∏–∏ –¥–ª—è —Å–ø–∏—Å–∫–æ–≤

# crm2/keyboards/admin_users.py
# –ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ: Inline-–∫–ª–∞–≤–∏–∞—Ç—É—Ä—ã –¥–ª—è —Ä–∞–∑–¥–µ–ª–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π –≤ –∞–¥–º–∏–Ω-–ø–∞–Ω–µ–ª–∏
# –§—É–Ω–∫—Ü–∏–∏:
# - users_groups_kb - –ö–ª–∞–≤–∏–∞—Ç—É—Ä–∞ –≤—ã–±–æ—Ä–∞ –≥—Ä—É–ø–ø –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π (–∫–æ–≥–æ—Ä—Ç—ã, –Ω–æ–≤—ã–µ, –≤—ã–ø—É—Å–∫–Ω–∏–∫–∏, –∞–¥–º–∏–Ω—ã)
# - users_pager_kb - –ö–ª–∞–≤–∏–∞—Ç—É—Ä–∞ –ø–∞–≥–∏–Ω–∞—Ü–∏–∏ –¥–ª—è —Å–ø–∏—Å–∫–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π –≥—Ä—É–ø–ø—ã

# crm2/keyboards/agents.py
# –ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ: Reply-–∫–ª–∞–≤–∏–∞—Ç—É—Ä–∞ –º–µ–Ω—é –ò–ò-–∞–≥–µ–Ω—Ç–æ–≤ —Å –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—è–º–∏ –∏ —Å—Å—ã–ª–∫–∞–º–∏
# –§—É–Ω–∫—Ü–∏–∏:
# - agents_menu_kb - –ú–µ–Ω—é –∞–≥–µ–Ω—Ç–æ–≤: –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—è, –º–µ–¥–∏—Ç–∞—Ü–∏—è, –≥–∞—Ä–º–æ–Ω–∏—è, –≤–æ–∑–≤—Ä–∞—Ç

# crm2/keyboards/guest.py
# –ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ: –ë–∞–∑–æ–≤–∞—è –∫–ª–∞–≤–∏–∞—Ç—É—Ä–∞ –¥–ª—è –≥–æ—Å—Ç–µ–≤–æ–≥–æ —Ä–µ–∂–∏–º–∞ (—É–ø—Ä–æ—â–µ–Ω–Ω–∞—è –≤–µ—Ä—Å–∏—è)
# –§—É–Ω–∫—Ü–∏–∏:
# - guest_start_kb - –ú–∏–Ω–∏–º–∞–ª–∏—Å—Ç–∏—á–Ω–∞—è –∫–ª–∞–≤–∏–∞—Ç—É—Ä–∞ –≥–æ—Å—Ç—è (—Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è –∏ –ø–æ–º–æ—â—å)

# crm2/keyboards/info_menu.py
# –ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ: –ö–ª–∞–≤–∏–∞—Ç—É—Ä–∞ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–æ–Ω–Ω–æ–≥–æ –º–µ–Ω—é —Å –≤—ã–±–æ—Ä–æ–º –ø–æ—Ç–æ–∫–æ–≤ –∏ –º–µ—Ä–æ–ø—Ä–∏—è—Ç–∏–π
# –§—É–Ω–∫—Ü–∏–∏:
# - info_menu_kb - –ê–¥–∞–ø—Ç–∏–≤–Ω–æ–µ –º–µ–Ω—é –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –æ –ø–æ—Ç–æ–∫–∞—Ö —Å –æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω—ã–º–∏ –º–µ—Ä–æ–ø—Ä–∏—è—Ç–∏—è–º–∏

# crm2/keyboards/main_menu.py
# –ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ: –£–Ω–∏–≤–µ—Ä—Å–∞–ª—å–Ω–∞—è –∫–ª–∞–≤–∏–∞—Ç—É—Ä–∞ –≥–ª–∞–≤–Ω–æ–≥–æ –º–µ–Ω—é —Å –ø–æ–¥–¥–µ—Ä–∂–∫–æ–π —Ä–æ–ª–µ–≤–æ–π –º–æ–¥–µ–ª–∏
# –§—É–Ω–∫—Ü–∏–∏:
# - main_menu_kb - –ì–ª–∞–≤–Ω–æ–µ –º–µ–Ω—é —Å–∏—Å—Ç–µ–º—ã —Å –±–∞–∑–æ–≤—ã–º–∏ —Ä–∞–∑–¥–µ–ª–∞–º–∏ –∏ –æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ–π –∞–¥–º–∏–Ω-–∫–Ω–æ–ø–∫–æ–π

# crm2/keyboards/profile.py
# –ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ: –ö–ª–∞–≤–∏–∞—Ç—É—Ä–∞ –ª–∏—á–Ω–æ–≥–æ –∫–∞–±–∏–Ω–µ—Ç–∞ —Å –Ω–∞—Å—Ç—Ä–æ–π–∫–∞–º–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
# –§—É–Ω–∫—Ü–∏–∏:
# - profile_menu_kb - –ú–µ–Ω—é –ª–∏—á–Ω–æ–≥–æ –∫–∞–±–∏–Ω–µ—Ç–∞: –ø–æ—Ç–æ–∫, —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è, –º–∞—Ç–µ—Ä–∏–∞–ª—ã

# crm2/keyboards/project.py
# –ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ: Inline-–∫–ª–∞–≤–∏–∞—Ç—É—Ä–∞ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –æ –ø—Ä–æ–µ–∫—Ç–µ —Å –≤–Ω–µ—à–Ω–∏–º–∏ —Å—Å—ã–ª–∫–∞–º–∏
# –§—É–Ω–∫—Ü–∏–∏:
# - project_menu_kb - –ú–µ–Ω—é –ø—Ä–æ–µ–∫—Ç–∞ —Å —Å—Å—ã–ª–∫–∞–º–∏ –Ω–∞ —Ä–µ–∂–∏–º –∑–∞–Ω—è—Ç–∏–π –∏ —Å–º—ã—Å–ª—ã –ø—Ä–æ–µ–∫—Ç–∞

# crm2/keyboards/schedule.py
# –ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ: –ö–ª–∞–≤–∏–∞—Ç—É—Ä—ã –∏ —É—Ç–∏–ª–∏—Ç—ã –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å —Ä–∞—Å–ø–∏—Å–∞–Ω–∏–µ–º (inline-–Ω–∞–≤–∏–≥–∞—Ü–∏—è)
# –§—É–Ω–∫—Ü–∏–∏:
# - _fmt_date - –§–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –¥–∞—Ç—ã –≤ –µ–¥–∏–Ω—ã–π —Ñ–æ—Ä–º–∞—Ç
# - format_range - –§–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –¥–∏–∞–ø–∞–∑–æ–Ω–∞ –¥–∞—Ç
# - build_schedule_keyboard - –ü–æ—Å—Ç—Ä–æ–µ–Ω–∏–µ –∫–ª–∞–≤–∏–∞—Ç—É—Ä—ã —Å–ø–∏—Å–∫–∞ —Å–µ—Å—Å–∏–π
# - schedule_root_kb - –ì–ª–∞–≤–Ω–æ–µ –º–µ–Ω—é —Ä–∞—Å–ø–∏—Å–∞–Ω–∏—è (–ø–æ—Ç–æ–∫–∏, –º–µ—Ä–æ–ø—Ä–∏—è—Ç–∏—è, –≤—Å–µ —Å–æ–±—ã—Ç–∏—è)
# - schedule_dates_kb - –ö–ª–∞–≤–∏–∞—Ç—É—Ä–∞ –¥–∞—Ç —Å–µ—Å—Å–∏–π –¥–ª—è –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–π –∫–æ–≥–æ—Ä—Ç—ã

# crm2/keyboards/session_picker.py
# –ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ: –°–ø–µ—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω–∞—è –∫–ª–∞–≤–∏–∞—Ç—É—Ä–∞ –¥–ª—è –≤—ã–±–æ—Ä–∞ —Å–µ—Å—Å–∏–π —Å –¥–∞—Ç–∞–º–∏ –∏ –∫–æ–¥–∞–º–∏
# –§—É–Ω–∫—Ü–∏–∏:
# - build_session_picker - –ü–æ—Å—Ç—Ä–æ–µ–Ω–∏–µ –∫–ª–∞–≤–∏–∞—Ç—É—Ä—ã –≤—ã–±–æ—Ä–∞ —Å–µ—Å—Å–∏–∏ —Å –≥—Ä—É–ø–ø–∏—Ä–æ–≤–∫–æ–π –ø–æ —Ä–µ–∂–∏–º—É

# crm2/middlewares/callback_auth_middleware.py
# –ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ: Middleware –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏ callback-–∑–∞–ø—Ä–æ—Å–æ–≤
# –ö–ª–∞—Å—Å—ã:
# - CallbackAuthMiddleware - Middleware –ø—Ä–æ–≤–µ—Ä–∫–∏ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏ –∫–æ–ª–±—ç–∫–æ–≤
# –ú–µ—Ç–æ–¥—ã:
# - __call__ - –û—Å–Ω–æ–≤–Ω–æ–π –º–µ—Ç–æ–¥ –æ–±—Ä–∞–±–æ—Ç–∫–∏ callback-–∑–∞–ø—Ä–æ—Å–æ–≤ —Å –¥–µ—Ç–∞–ª—å–Ω–æ–π –ª–æ–≥–∏–∫–æ–π –ø—Ä–æ–≤–µ—Ä–∫–∏

# crm2/middlewares/callback_auth_middleware.py
# –ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ: Middleware –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏ callback-–∑–∞–ø—Ä–æ—Å–æ–≤
# –ö–ª–∞—Å—Å—ã:
# - CallbackAuthMiddleware - Middleware –ø—Ä–æ–≤–µ—Ä–∫–∏ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏ –∫–æ–ª–±—ç–∫–æ–≤
# –ú–µ—Ç–æ–¥—ã:
# - __call__ - –û—Å–Ω–æ–≤–Ω–æ–π –º–µ—Ç–æ–¥ –æ–±—Ä–∞–±–æ—Ç–∫–∏ callback-–∑–∞–ø—Ä–æ—Å–æ–≤ —Å –¥–µ—Ç–∞–ª—å–Ω–æ–π –ª–æ–≥–∏–∫–æ–π –ø—Ä–æ–≤–µ—Ä–∫–∏

# crm2/routers/__init__.py
# –ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ: –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –ø–∞–∫–µ—Ç–∞ routers - —ç–∫—Å–ø–æ—Ä—Ç –º–æ–¥—É–ª–µ–π –º–∞—Ä—à—Ä—É—Ç–∏–∑–∞—Ü–∏–∏
# –≠–∫—Å–ø–æ—Ä—Ç–∏—Ä—É–µ—Ç:
# - start - –º–æ–¥—É–ª—å —Å—Ç–∞—Ä—Ç–æ–≤—ã—Ö –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–æ–≤

# crm2/routers/start.py
# –ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ: –û–±—Ä–∞–±–æ—Ç—á–∏–∫ –∫–æ–º–∞–Ω–¥—ã /start —Å —Ä–æ–ª–µ–≤–æ–π –Ω–∞–≤–∏–≥–∞—Ü–∏–µ–π - —É—Å—Ç–∞—Ä–µ–≤—à–∞—è –≤–µ—Ä—Å–∏—è (–¥—É–±–ª–∏—Ä—É–µ—Ç handlers/start.py)
# –§—É–Ω–∫—Ü–∏–∏:
# - get_user_role - –û–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ —Ä–æ–ª–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –ø–æ Telegram ID
# –û–±—Ä–∞–±–æ—Ç—á–∏–∫–∏:
# - cmd_start - –ì–ª–∞–≤–Ω—ã–π –æ–±—Ä–∞–±–æ—Ç—á–∏–∫ /start —Å —Ä–∞–∑–Ω—ã–º–∏ —Å—Ü–µ–Ω–∞—Ä–∏—è–º–∏ –¥–ª—è —Ä–∞–∑–Ω—ã—Ö —Ä–æ–ª–µ–π

# crm2/services/attendance.py
# –ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ: –°–µ—Ä–≤–∏—Å–Ω—ã–π —Å–ª–æ–π –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å –ø–æ—Å–µ—â–∞–µ–º–æ—Å—Ç—å—é –∏ –¥–æ–º–∞—à–Ω–∏–º–∏ –∑–∞–¥–∞–Ω–∏—è–º–∏ (—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–∞—è –≤–µ—Ä—Å–∏—è)
# –§—É–Ω–∫—Ü–∏–∏:
# - find_today_session - –ü–æ–∏—Å–∫ —Å–µ–≥–æ–¥–Ω—è—à–Ω–µ–≥–æ –∑–∞–Ω—è—Ç–∏—è –≤ session_days
# - find_recent_past_sessions - –ü–æ–ª—É—á–µ–Ω–∏–µ –ø–æ—Å–ª–µ–¥–Ω–∏—Ö –ø—Ä–æ—à–µ–¥—à–∏—Ö –∑–∞–Ω—è—Ç–∏–π
# - get_stream_title - –ü–æ–ª—É—á–µ–Ω–∏–µ –Ω–∞–∑–≤–∞–Ω–∏—è –ø–æ—Ç–æ–∫–∞
# - get_attendance_map - –ü–æ–ª—É—á–µ–Ω–∏–µ –∫–∞—Ä—Ç—ã –ø–æ—Å–µ—â–∞–µ–º–æ—Å—Ç–∏ –¥–ª—è —Å–µ—Å—Å–∏–∏
# - upsert_attendance - –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ/–¥–æ–±–∞–≤–ª–µ–Ω–∏–µ –∑–∞–ø–∏—Å–∏ –ø–æ—Å–µ—â–∞–µ–º–æ—Å—Ç–∏
# - status_to_emoji/emoji_to_status - –ö–æ–Ω–≤–µ—Ä—Ç–∞—Ü–∏—è —Å—Ç–∞—Ç—É—Å–æ–≤ –≤ —ç–º–æ–¥–∑–∏ –∏ –æ–±—Ä–∞—Ç–Ω–æ
# - mark_attendance - –ê—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–æ–µ –æ—Ç–º–µ—Ç–∫–∞ –ø–æ—Å–µ—â–∞–µ–º–æ—Å—Ç–∏
# - get_present_users - –ü–æ–ª—É—á–µ–Ω–∏–µ –ø—Ä–∏—Å—É—Ç—Å—Ç–≤–æ–≤–∞–≤—à–∏—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
# - find_user_id_by_nickname - –ü–æ–∏—Å–∫ user_id –ø–æ –Ω–∏–∫–Ω–µ–π–º—É
# - get_sessions_near - –ü–æ–ª—É—á–µ–Ω–∏–µ –±–ª–∏–∂–∞–π—à–∏—Ö —Å–µ—Å—Å–∏–π
# - ensure_homework_delivery_table - –°–æ–∑–¥–∞–Ω–∏–µ —Ç–∞–±–ª–∏—Ü—ã –¥–æ—Å—Ç–∞–≤–∫–∏ –î–ó
# - get_not_yet_delivered - –ü–æ–ª—É—á–µ–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π –±–µ–∑ –¥–æ—Å—Ç–∞–≤–ª–µ–Ω–Ω—ã—Ö –î–ó
# - mark_homework_delivered - –û—Ç–º–µ—Ç–∫–∞ –¥–æ—Å—Ç–∞–≤–∫–∏ –î–ó

# crm2/services/attendance2.py
# –ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ: –°–µ—Ä–≤–∏—Å–Ω—ã–π —Å–ª–æ–π –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å –ø–æ—Å–µ—â–∞–µ–º–æ—Å—Ç—å—é –∏ –¥–æ–º–∞—à–Ω–∏–º–∏ –∑–∞–¥–∞–Ω–∏—è–º–∏ (–∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–∞—è –≤–µ—Ä—Å–∏—è)
# –§—É–Ω–∫—Ü–∏–∏:
# - get_sessions_near - –ê—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–æ–µ –ø–æ–ª—É—á–µ–Ω–∏–µ –±–ª–∏–∂–∞–π—à–∏—Ö —Å–µ—Å—Å–∏–π
# - get_present_users - –ê—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–æ–µ –ø–æ–ª—É—á–µ–Ω–∏–µ –ø—Ä–∏—Å—É—Ç—Å—Ç–≤–æ–≤–∞–≤—à–∏—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
# - get_not_yet_delivered - –ê—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–æ–µ –ø–æ–ª—É—á–µ–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π –±–µ–∑ –î–ó
# - mark_homework_delivered - –ê—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–∞—è –æ—Ç–º–µ—Ç–∫–∞ –¥–æ—Å—Ç–∞–≤–∫–∏ –î–ó

# crm2/services/chatgpt_status.py
# –ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ: –î–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞ –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç–∏ –ø–ª–∞—Ç–Ω–æ–≥–æ —Å–µ—Ä–≤–∏—Å–∞ ChatGPT —Å –ø—Ä–æ–≤–µ—Ä–∫–æ–π –±–∞–ª–∞–Ω—Å–∞
# –¢–∏–ø—ã:
# - PaidState - –õ–∏—Ç–µ—Ä–∞–ª —Å–æ—Å—Ç–æ—è–Ω–∏–π –¥–æ—Å—Ç—É–ø–∞ (open, closed, unknown)
# –§—É–Ω–∫—Ü–∏–∏:
# - _decide_state_from_error - –û–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ —Å–æ—Å—Ç–æ—è–Ω–∏—è –ø–æ —Ç–µ–∫—Å—Ç—É –æ—à–∏–±–∫–∏
# - probe_paid_access - –ü—Ä–æ–≤–µ—Ä–∫–∞ –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç–∏ ChatGPT —á–µ—Ä–µ–∑ –ø—Ä–æ–±–Ω—ã–π –∑–∞–ø—Ä–æ—Å
# - render_binary_md - –§–æ—Ä–º–∏—Ä–æ–≤–∞–Ω–∏–µ —á–∏—Ç–∞–µ–º–æ–≥–æ –æ—Ç—á–µ—Ç–∞ –≤ Markdown

# crm2/services/content_loader.py
# –ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ: –ó–∞–≥—Ä—É–∑–∫–∞ –∏ –ø—Ä–µ–æ–±—Ä–∞–∑–æ–≤–∞–Ω–∏–µ markdown-–∫–æ–Ω—Ç–µ–Ω—Ç–∞ –≤ –±–µ–∑–æ–ø–∞—Å–Ω—ã–π HTML –¥–ª—è Telegram
# –¢–∏–ø—ã:
# - ContentKey - –õ–∏—Ç–µ—Ä–∞–ª –∫–ª—é—á–µ–π –∫–æ–Ω—Ç–µ–Ω—Ç–∞ (mode, meanings)
# –§—É–Ω–∫—Ü–∏–∏:
# - _sanitize_html_for_telegram - –°–∞–Ω–∏—Ç–∏–∑–∞—Ü–∏—è HTML –¥–ª—è Telegram (—É–¥–∞–ª–µ–Ω–∏–µ –æ–ø–∞—Å–Ω—ã—Ö —Ç–µ–≥–æ–≤)
# - load_html - –ó–∞–≥—Ä—É–∑–∫–∞ –∏ –ø—Ä–µ–æ–±—Ä–∞–∑–æ–≤–∞–Ω–∏–µ markdown-—Ñ–∞–π–ª–∞ –≤ HTML

# crm2/services/database.py
# –ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ: –ê—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–∞—è –æ–±–µ—Ä—Ç–∫–∞ –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å SQLite –±–∞–∑–æ–π –¥–∞–Ω–Ω—ã—Ö
# –ö–ª–∞—Å—Å—ã:
# - Database - –ê—Å–∏–Ω—Ö—Ä–æ–Ω–Ω—ã–π –∫–ª–∏–µ–Ω—Ç –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö —Å –º–µ—Ç–æ–¥–∞–º–∏ execute, fetch_all, fetch_one
# –§—É–Ω–∫—Ü–∏–∏:
# - _resolve_db_path - –û–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –ø—É—Ç–∏ –∫ —Ñ–∞–π–ª—É –ë–î —á–µ—Ä–µ–∑ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è
# –ú–µ—Ç–æ–¥—ã Database:
# - execute - –í—ã–ø–æ–ª–Ω–µ–Ω–∏–µ –∑–∞–ø—Ä–æ—Å–æ–≤ –Ω–∞ –∏–∑–º–µ–Ω–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö
# - fetch_all - –í—ã–ø–æ–ª–Ω–µ–Ω–∏–µ –∑–∞–ø—Ä–æ—Å–æ–≤ –∏ –≤–æ–∑–≤—Ä–∞—Ç –≤—Å–µ—Ö —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤
# - fetch_one - –í—ã–ø–æ–ª–Ω–µ–Ω–∏–µ –∑–∞–ø—Ä–æ—Å–æ–≤ –∏ –≤–æ–∑–≤—Ä–∞—Ç –æ–¥–Ω–æ–π —Å—Ç—Ä–æ–∫–∏

# crm2/services/participants.py
# –ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ: –°–µ—Ä–≤–∏—Å –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å –ø—Ä–∏–≤—è–∑–∫–æ–π –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π –∫ —É—á–µ–±–Ω—ã–º –ø–æ—Ç–æ–∫–∞–º
# –§—É–Ω–∫—Ü–∏–∏:
# - get_streams - –ü–æ–ª—É—á–µ–Ω–∏–µ —Å–ø–∏—Å–∫–∞ –≤—Å–µ—Ö –ø–æ—Ç–æ–∫–æ–≤ –∏–∑ –ë–î
# - upsert_participant_stream - –ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é –ø–æ—Ç–æ–∫–∞ (INSERT/UPDATE)
# - users_missing_stream - –ü–æ–∏—Å–∫ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π –±–µ–∑ –ø—Ä–∏–≤—è–∑–∫–∏ –∫ –ø–æ—Ç–æ–∫—É
# - get_user_id_by_tg - –ü–æ–ª—É—á–µ–Ω–∏–µ user_id –ø–æ Telegram ID

# crm2/services/schedule.py
# –ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ: –ö–æ–º–ø–ª–µ–∫—Å–Ω–∞—è —Å–∏—Å—Ç–µ–º–∞ –∑–∞–≥—Ä—É–∑–∫–∏ –∏ —Ä–∞–±–æ—Ç—ã —Å —Ä–∞—Å–ø–∏—Å–∞–Ω–∏–µ–º –∏–∑ XLSX –∏ –ë–î
# –ö–ª–∞—Å—Å—ã:
# - Session - Dataclass –¥–ª—è –ø—Ä–µ–¥—Å—Ç–∞–≤–ª–µ–Ω–∏—è —É—á–µ–±–Ω–æ–π —Å–µ—Å—Å–∏–∏ (–¥–∞—Ç—ã, –∫–æ–¥, —Ç–µ–º–∞, –∞–Ω–Ω–æ—Ç–∞—Ü–∏—è)
# –§—É–Ω–∫—Ü–∏–∏:
# - _norm - –ù–æ—Ä–º–∞–ª–∏–∑–∞—Ü–∏—è —Å—Ç—Ä–æ–∫ –¥–ª—è —Å—Ä–∞–≤–Ω–µ–Ω–∏—è
# - _parse_date - –£–Ω–∏–≤–µ—Ä—Å–∞–ª—å–Ω—ã–π –ø–∞—Ä—Å–∏–Ω–≥ –¥–∞—Ç –∏–∑ —Ä–∞–∑–Ω—ã—Ö —Ñ–æ—Ä–º–∞—Ç–æ–≤
# - _find_header_row - –ü–æ–∏—Å–∫ —Å—Ç—Ä–æ–∫–∏ –∑–∞–≥–æ–ª–æ–≤–∫–æ–≤ –≤ XLSX —Ñ–∞–π–ª–µ
# - _cohort_id_from_filename - –ò–∑–≤–ª–µ—á–µ–Ω–∏–µ ID –ø–æ—Ç–æ–∫–∞ –∏–∑ –∏–º–µ–Ω–∏ —Ñ–∞–π–ª–∞
# - _load_one_file - –ó–∞–≥—Ä—É–∑–∫–∞ –æ–¥–Ω–æ–≥–æ XLSX —Ñ–∞–π–ª–∞ —Ä–∞—Å–ø–∏—Å–∞–Ω–∏—è
# - load_all - –ó–∞–≥—Ä—É–∑–∫–∞ –≤—Å–µ—Ö —Ä–∞—Å–ø–∏—Å–∞–Ω–∏–π (XLSX + fallback –Ω–∞ –ë–î)
# - get_user_cohort_id - –ü–æ–ª—É—á–µ–Ω–∏–µ ID –ø–æ—Ç–æ–∫–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
# - upcoming - –ë–ª–∏–∂–∞–π—à–∏–µ –∑–∞–Ω—è—Ç–∏—è –¥–ª—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
# - list_for_cohort - –°–ø–∏—Å–æ–∫ —Å–µ—Å—Å–∏–π –¥–ª—è –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–≥–æ –ø–æ—Ç–æ–∫–∞
# - detail_for_cohort_date - –î–µ—Ç–∞–ª–∏ —Å–µ—Å—Å–∏–∏ –ø–æ –ø–æ—Ç–æ–∫—É –∏ –¥–∞—Ç–µ
# - list_all - –û–±—â–∏–π —Å–ø–∏—Å–æ–∫ –≤—Å–µ—Ö —Å–µ—Å—Å–∏–π
# - _rows_to_sessions - –ö–æ–Ω–≤–µ—Ä—Ç–∞—Ü–∏—è —Å—Ç—Ä–æ–∫ –ë–î –≤ –æ–±—ä–µ–∫—Ç—ã Session
# - format_next - –§–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –æ –±–ª–∏–∂–∞–π—à–µ–º –∑–∞–Ω—è—Ç–∏–∏
# - format_sessions_brief - –ö—Ä–∞—Ç–∫–æ–µ —Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ —Å–ø–∏—Å–∫–∞ —Å–µ—Å—Å–∏–π
# - next_training_text_for_user - –¢–µ–∫—Å—Ç –±–ª–∏–∂–∞–π—à–µ–≥–æ –∑–∞–Ω—è—Ç–∏—è –¥–ª—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è

# crm2/services/services.py
# –ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ: –ó–∞–≥–ª—É—à–∫–∞ –¥–ª—è –±—É–¥—É—â–∏—Ö —Å–µ—Ä–≤–∏—Å–Ω—ã—Ö —Ñ—É–Ω–∫—Ü–∏–π –∏ –±–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫–∏ (–ø—É—Å—Ç–æ–π —Ñ–∞–π–ª)
# –§—É–Ω–∫—Ü–∏–∏: ‚Äî

# crm2/services/users.py
# –ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ: –°–µ—Ä–≤–∏—Å –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º–∏ - CRUD –æ–ø–µ—Ä–∞—Ü–∏–∏ –∏ —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø—Ä–æ—Ñ–∏–ª—è–º–∏
# –§—É–Ω–∫—Ü–∏–∏:
# - _resolve_db_path - –û–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –ø—É—Ç–∏ –∫ –ë–î —á–µ—Ä–µ–∑ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è
# - _connect - –°–æ–∑–¥–∞–Ω–∏–µ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è –∫ –ë–î —Å –Ω–∞—Å—Ç—Ä–æ–π–∫–∞–º–∏
# - get_user_by_telegram - –ü–æ–ª—É—á–µ–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –ø–æ Telegram ID
# - get_user_cohort_id_by_tg - –ü–æ–ª—É—á–µ–Ω–∏–µ ID –ø–æ—Ç–æ–∫–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
# - set_plain_user_field_by_tg - –ë–µ–∑–æ–ø–∞—Å–Ω–æ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ –ø–æ–ª–µ–π –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
# - upsert_participant_by_tg_sync - –°–∏–Ω—Ö—Ä–æ–Ω–Ω–æ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ –ø—Ä–∏–≤—è–∑–∫–∏ –∫ –ø–æ—Ç–æ–∫—É
# - upsert_participant_by_tg - –ê—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–∞—è –æ–±–µ—Ä—Ç–∫–∞ –¥–ª—è –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è –ø–æ—Ç–æ–∫–∞

# crm2/__main__.py ===
# –ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ: —Ç–æ—á–∫–∞ –≤—Ö–æ–¥–∞ –ø—Ä–æ–µ–∫—Ç–∞/–±–æ—Ç–∞, –º–æ–¥—É–ª—å CRM, –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω—ã–µ –∑–∞–¥–∞—á–∏.
# –ö–ª–∞—Å—Å—ã: ‚Äî
# –§—É–Ω–∫—Ü–∏–∏: ‚Äî
# === –ö–æ–Ω–µ—Ü –∞–≤—Ç–æ–∑–∞–≥–æ–ª–æ–≤–∫–∞ ===

# === –ê–≤—Ç–æ–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞–Ω–Ω—ã–π –∑–∞–≥–æ–ª–æ–≤–æ–∫: crm2/app.py
# –°–ø–∏—Å–æ–∫ –≤–µ—Ä—Ö–Ω–µ—É—Ä–æ–≤–Ω–µ–≤—ã—Ö –æ–±—ä–µ–∫—Ç–æ–≤ —Ñ–∞–π–ª–∞ (–∫–ª–∞—Å—Å—ã –∏ —Ñ—É–Ω–∫—Ü–∏–∏).
# –û–±–Ω–æ–≤–ª—è–µ—Ç—Å—è –≤—Ä—É—á–Ω—É—é –ø—Ä–∏ –∏–∑–º–µ–Ω–µ–Ω–∏–∏ —Å–æ—Å—Ç–∞–≤–∞ —Ñ—É–Ω–∫—Ü–∏–π/–∫–ª–∞—Å—Å–æ–≤.
# –ö–ª–∞—Å—Å—ã: ‚Äî
# –§—É–Ω–∫—Ü–∏–∏: _load_env, _try_include, _test_db, _runner, main, health, _on_startup, _on_shutdown
# === –ö–æ–Ω–µ—Ü –∞–≤—Ç–æ–∑–∞–≥–æ–ª–æ–≤–∫–∞
# crm2/app.py
# ... –æ—Å—Ç–∞–ª—å–Ω–æ–π –∫–æ–¥ –±–µ–∑ –∏–∑–º–µ–Ω–µ–Ω–∏–π ...

# === –ê–≤—Ç–æ–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞–Ω–Ω—ã–π –∑–∞–≥–æ–ª–æ–≤–æ–∫: crm2/bot.py
# –°–ø–∏—Å–æ–∫ –≤–µ—Ä—Ö–Ω–µ—É—Ä–æ–≤–Ω–µ–≤—ã—Ö –æ–±—ä–µ–∫—Ç–æ–≤ —Ñ–∞–π–ª–∞ (–∫–ª–∞—Å—Å—ã –∏ —Ñ—É–Ω–∫—Ü–∏–∏).
# –û–±–Ω–æ–≤–ª—è–µ—Ç—Å—è –≤—Ä—É—á–Ω—É—é –ø—Ä–∏ –∏–∑–º–µ–Ω–µ–Ω–∏–∏ —Å–æ—Å—Ç–∞–≤–∞ —Ñ—É–Ω–∫—Ü–∏–π/–∫–ª–∞—Å—Å–æ–≤.
# –ö–ª–∞—Å—Å—ã: ‚Äî
# –§—É–Ω–∫—Ü–∏–∏: ‚Äî
# –ú–æ–¥—É–ª—å –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–∏ Telegram-–±–æ—Ç–∞.
# –ó–¥–µ—Å—å —Å–æ–∑–¥–∞—ë—Ç—Å—è —ç–∫–∑–µ–º–ø–ª—è—Ä Bot –∏ Dispatcher,
# —á—Ç–æ–±—ã –∏—Ö –º–æ–∂–Ω–æ –±—ã–ª–æ –∏–º–ø–æ—Ä—Ç–∏—Ä–æ–≤–∞—Ç—å –≤ –¥—Ä—É–≥–∏—Ö —á–∞—Å—Ç—è—Ö –ø—Ä–æ–µ–∫—Ç–∞.
# === –ö–æ–Ω–µ—Ü –∞–≤—Ç–æ–∑–∞–≥–æ–ª–æ–≤–∫–∞
# crm2/bot.py

# === –ê–≤—Ç–æ–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞–Ω–Ω—ã–π –∑–∞–≥–æ–ª–æ–≤–æ–∫: crm2/cli_import_schedule.py
# –°–ø–∏—Å–æ–∫ –≤–µ—Ä—Ö–Ω–µ—É—Ä–æ–≤–Ω–µ–≤—ã—Ö –æ–±—ä–µ–∫—Ç–æ–≤ —Ñ–∞–π–ª–∞ (–∫–ª–∞—Å—Å—ã –∏ —Ñ—É–Ω–∫—Ü–∏–∏).
# –û–±–Ω–æ–≤–ª—è–µ—Ç—Å—è –≤—Ä—É—á–Ω—É—é –ø—Ä–∏ –∏–∑–º–µ–Ω–µ–Ω–∏–∏ —Å–æ—Å—Ç–∞–≤–∞ —Ñ—É–Ω–∫—Ü–∏–π/–∫–ª–∞—Å—Å–æ–≤.
# –ö–ª–∞—Å—Å—ã: ‚Äî
# –§—É–Ω–∫—Ü–∏–∏: main
# === –ö–æ–Ω–µ—Ü –∞–≤—Ç–æ–∑–∞–≥–æ–ª–æ–≤–∫–∞
# === –§–∞–π–ª: crm2/cli_import_schedule.py
# –ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ: –æ–¥–Ω–æ—Ä–∞–∑–æ–≤—ã–π –∏–º–ø–æ—Ä—Ç —Ä–∞—Å–ø–∏—Å–∞–Ω–∏—è –∏–∑ XLSX –≤ session_days (–≤–Ω–µ –∑–∞–ø—É—Å–∫–∞ –±–æ—Ç–∞)
# –ó–∞–ø—É—Å–∫ –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ (SSH):
# python -m crm2.cli_import_schedule schedule_2025_1_cohort.xlsx schedule_2025_2_cohort.xlsx

# === –ê–≤—Ç–æ–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞–Ω–Ω—ã–π –∑–∞–≥–æ–ª–æ–≤–æ–∫: crm2/config.py
# –°–ø–∏—Å–æ–∫ –≤–µ—Ä—Ö–Ω–µ—É—Ä–æ–≤–Ω–µ–≤—ã—Ö –æ–±—ä–µ–∫—Ç–æ–≤ —Ñ–∞–π–ª–∞ (–∫–ª–∞—Å—Å—ã –∏ —Ñ—É–Ω–∫—Ü–∏–∏).
# –û–±–Ω–æ–≤–ª—è–µ—Ç—Å—è –≤—Ä—É—á–Ω—É—é –ø—Ä–∏ –∏–∑–º–µ–Ω–µ–Ω–∏–∏ —Å–æ—Å—Ç–∞–≤–∞ —Ñ—É–Ω–∫—Ü–∏–π/–∫–ª–∞—Å—Å–æ–≤.
# –ö–ª–∞—Å—Å—ã: Settings, _Settings
# –§—É–Ω–∫—Ü–∏–∏: get_settings
# === –ö–æ–Ω–µ—Ü –∞–≤—Ç–æ–∑–∞–≥–æ–ª–æ–≤–∫–∞
#
# === –§–∞–π–ª: crm2/config.py
# –ê–Ω–Ω–æ—Ç–∞—Ü–∏—è: –º–æ–¥—É–ª—å CRM, –Ω–∞—Å—Ç—Ä–æ–π–∫–∏/–∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è, –∑–∞–≥—Ä—É–∑–∫–∞ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ –∏–∑ .env

# === –ê–≤—Ç–æ–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞–Ω–Ω—ã–π –∑–∞–≥–æ–ª–æ–≤–æ–∫: crm2/handlers_schedule.py
# –°–ø–∏—Å–æ–∫ –≤–µ—Ä—Ö–Ω–µ—É—Ä–æ–≤–Ω–µ–≤—ã—Ö –æ–±—ä–µ–∫—Ç–æ–≤ —Ñ–∞–π–ª–∞ (–∫–ª–∞—Å—Å—ã –∏ —Ñ—É–Ω–∫—Ü–∏–∏).
# –û–±–Ω–æ–≤–ª—è–µ—Ç—Å—è –≤—Ä—É—á–Ω—É—é –ø—Ä–∏ –∏–∑–º–µ–Ω–µ–Ω–∏–∏ —Å–æ—Å—Ç–∞–≤–∞ —Ñ—É–Ω–∫—Ü–∏–π/–∫–ª–∞—Å—Å–æ–≤.
# –ö–ª–∞—Å—Å—ã: ‚Äî
# –§—É–Ω–∫—Ü–∏–∏: send_schedule_keyboard, send_nearest_session, _info_menu_kb, show_info_menu, _show_cohort1, _show_cohort2, _show_new, _show_all_schedule, _show_main_menu, on_session_click
# === –ö–æ–Ω–µ—Ü –∞–≤—Ç–æ–∑–∞–≥–æ–ª–æ–≤–∫–∞
#
# === –§–∞–π–ª: crm2/handlers_schedule.py
# –ê–Ω–Ω–æ—Ç–∞—Ü–∏—è: –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ —Ä–∞—Å–ø–∏—Å–∞–Ω–∏—è –¥–ª—è Telegram-–±–æ—Ç–∞, —Ä–∞–±–æ—Ç–∞ —Å —Å–µ—Å—Å–∏—è–º–∏ –∏ –¥–∞—Ç–∞–º–∏ –∑–∞–Ω—è—Ç–∏–π

# === –ê–≤—Ç–æ–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞–Ω–Ω—ã–π –∑–∞–≥–æ–ª–æ–≤–æ–∫: crm2/logging_config.py
# –°–ø–∏—Å–æ–∫ –≤–µ—Ä—Ö–Ω–µ—É—Ä–æ–≤–Ω–µ–≤—ã—Ö –æ–±—ä–µ–∫—Ç–æ–≤ —Ñ–∞–π–ª–∞ (–∫–ª–∞—Å—Å—ã –∏ —Ñ—É–Ω–∫—Ü–∏–∏).
# –û–±–Ω–æ–≤–ª—è–µ—Ç—Å—è –≤—Ä—É—á–Ω—É—é –ø—Ä–∏ –∏–∑–º–µ–Ω–µ–Ω–∏–∏ —Å–æ—Å—Ç–∞–≤–∞ —Ñ—É–Ω–∫—Ü–∏–π/–∫–ª–∞—Å—Å–æ–≤.
# –ö–ª–∞—Å—Å—ã: ‚Äî
# –§—É–Ω–∫—Ü–∏–∏: setup_logging
# === –ö–æ–Ω–µ—Ü –∞–≤—Ç–æ–∑–∞–≥–æ–ª–æ–≤–∫–∞
#
# === –§–∞–π–ª: crm2/logging_config.py
# –ê–Ω–Ω–æ—Ç–∞—Ü–∏—è: –Ω–∞—Å—Ç—Ä–æ–π–∫–∞ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è –¥–ª—è –ø—Ä–æ–µ–∫—Ç–∞ CRM

# === –ê–≤—Ç–æ–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞–Ω–Ω—ã–π –∑–∞–≥–æ–ª–æ–≤–æ–∫: crm2/states.py
# –°–ø–∏—Å–æ–∫ –≤–µ—Ä—Ö–Ω–µ—É—Ä–æ–≤–Ω–µ–≤—ã—Ö –æ–±—ä–µ–∫—Ç–æ–≤ —Ñ–∞–π–ª–∞ (–∫–ª–∞—Å—Å—ã –∏ —Ñ—É–Ω–∫—Ü–∏–∏).
# –û–±–Ω–æ–≤–ª—è–µ—Ç—Å—è –≤—Ä—É—á–Ω—É—é –ø—Ä–∏ –∏–∑–º–µ–Ω–µ–Ω–∏–∏ —Å–æ—Å—Ç–∞–≤–∞ —Ñ—É–Ω–∫—Ü–∏–π/–∫–ª–∞—Å—Å–æ–≤.
# –ö–ª–∞—Å—Å—ã: Login
# –§—É–Ω–∫—Ü–∏–∏: ‚Äî
# === –ö–æ–Ω–µ—Ü –∞–≤—Ç–æ–∑–∞–≥–æ–ª–æ–≤–∫–∞
#
# === –§–∞–π–ª: crm2/states.py
# –ê–Ω–Ω–æ—Ç–∞—Ü–∏—è: FSM —Å–æ—Å—Ç–æ—è–Ω–∏—è –¥–ª—è –ø—Ä–æ—Ü–µ—Å—Å–∞ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏ –≤ Telegram-–±–æ—Ç–µ

# === –ê–≤—Ç–æ–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞–Ω–Ω—ã–π –∑–∞–≥–æ–ª–æ–≤–æ–∫: crm2/update_project_map.py
# –°–ø–∏—Å–æ–∫ –≤–µ—Ä—Ö–Ω–µ—É—Ä–æ–≤–Ω–µ–≤—ã—Ö –æ–±—ä–µ–∫—Ç–æ–≤ —Ñ–∞–π–ª–∞ (–∫–ª–∞—Å—Å—ã –∏ —Ñ—É–Ω–∫—Ü–∏–∏).
# –û–±–Ω–æ–≤–ª—è–µ—Ç—Å—è –≤—Ä—É—á–Ω—É—é –ø—Ä–∏ –∏–∑–º–µ–Ω–µ–Ω–∏–∏ —Å–æ—Å—Ç–∞–≤–∞ —Ñ—É–Ω–∫—Ü–∏–π/–∫–ª–∞—Å—Å–æ–≤.
# –ö–ª–∞—Å—Å—ã: ‚Äî
# –§—É–Ω–∫—Ü–∏–∏: list_files, read_env_vars, read_db_schema, build_map, main
# === –ö–æ–Ω–µ—Ü –∞–≤—Ç–æ–∑–∞–≥–æ–ª–æ–≤–∫–∞
#
# === –§–∞–π–ª: crm2/update_project_map.py
# –ê–Ω–Ω–æ—Ç–∞—Ü–∏—è: —É—Ç–∏–ª–∏—Ç–∞ –¥–ª—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–≥–æ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è –∫–∞—Ä—Ç—ã –ø—Ä–æ–µ–∫—Ç–∞ PROJECT_MAP.full.md


# (–ú–æ–¥—É–ª—å guards.py - —Ñ–∏–ª—å—Ç—Ä—ã –∫–æ–Ω—Ç—Ä–æ–ª—è –¥–æ—Å—Ç—É–ø–∞ –¥–ª—è Telegram –±–æ—Ç–∞)
# ()
# (–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ: –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è–µ—Ç —Ñ–∏–ª—å—Ç—Ä—ã –¥–ª—è –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è –¥–æ—Å—Ç—É–ø–∞ –∫ –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–∞–º)
# (–Ω–∞ –æ—Å–Ω–æ–≤–µ —Ä–æ–ª–µ–π –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π –∏ –¥—Ä—É–≥–∏—Ö —É—Å–ª–æ–≤–∏–π.)
# ()
# (–ö–ª–∞—Å—Å—ã:)
# (- AdminOnly - —Ñ–∏–ª—å—Ç—Ä, —Ä–∞–∑—Ä–µ—à–∞—é—â–∏–π –¥–æ—Å—Ç—É–ø —Ç–æ–ª—å–∫–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º —Å —Ä–æ–ª—å—é 'admin')
# ()
# (–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ:)
# (from crm2.utils.guards import AdminOnly)
# ()
# (router = Router&#40;&#41;)
# (router.message.filter&#40;AdminOnly&#40;&#41;&#41;)
# (router.callback_query.filter&#40;AdminOnly&#40;&#41;&#41;)




